(this["webpackJsonpflow-frontend"]=this["webpackJsonpflow-frontend"]||[]).push([[4],{118:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(18),a=n(39),i=(n(1),n(137)),o=n.n(i),d=n(175),r=n(174),s=n(2),l=(n(119),n(8)),b=function(e){var t=e.handleSave,n=e.hasPreviewButton,i=e.children,b=Object(a.a)(e,["handleSave","hasPreviewButton","children"]),u=Object(s.g)();return Object(l.jsxs)("div",Object(c.a)(Object(c.a)({className:"CardHeader"},b),{},{children:[Object(l.jsxs)("div",{className:"left-section",children:[i,Object(l.jsx)(r.a,{disableRipple:!0,children:Object(l.jsx)(o.a,{})})]}),Object(l.jsxs)("div",{className:"d-flex",children:[n&&Object(l.jsx)(d.a,{variant:"text",className:"btn-preview",onClick:function(){u.push({pathname:"/preview"})},children:"Go to Preview"}),t&&Object(l.jsx)(d.a,{variant:"contained",onClick:t,children:"Save"})]})]}))}},119:function(e,t,n){},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var c=n(18),a=n(39),i=n(113),o=n(1),d=n(175),r=n(138),s=n.n(r),l=n(139),b=n.n(l),u=n(140),j=n.n(u),O=(n(124),n(8)),f=function(e){var t=Object(o.useState)(!1),n=Object(i.a)(t,2),r=n[0],l=n[1],u=e.type,f=e.listItems,v=e.nodeId,h=e.selectedId,p=e.onFocusId,m=e.handleSelect,x=Object(a.a)(e,["type","listItems","nodeId","selectedId","onFocusId","handleSelect"]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",Object(c.a)(Object(c.a)({className:"CardBody ".concat(f.length>3?"has-show-more":""," ").concat(r?"show-all":"")},x),{},{children:("actions"===u||"conditions"===u?f.filter((function(e){var t;return!(null===(t=h[v])||void 0===t?void 0:t.includes(e.id))})):f.filter((function(e){return!h.includes(e.id)}))).map((function(e){return Object(O.jsx)(d.a,{onClick:function(){return m(e.id)},disableRipple:!0,variant:"text",className:"btn-card-item ".concat(p===e.id?"on-focus":""),startIcon:Object(O.jsx)(s.a,{}),children:e.name},e.id)}))})),f.length>3&&Object(O.jsx)("div",{className:"btn-show-more",children:Object(O.jsxs)(d.a,{onClick:function(){return l(!r)},variant:"text",disableRipple:!0,endIcon:r?Object(O.jsx)(b.a,{}):Object(O.jsx)(j.a,{}),children:["Show ",r?"less":"more"]})})]})}},124:function(e,t,n){},125:function(e,t,n){"use strict";var c=n(1),a=n.n(c),i=n(114),o=n(176),d=n(175),r=n(141),s=n.n(r),l=n(174),b=(n(126),n(8));t.a=Object(c.memo)((function(e){var t,n,c=e.id,r=e.data,u=e.isConnectable,j=Object(i.e)((function(e){return e.selectedElements}));return Object(b.jsxs)("div",{className:"ButtonSelectorNode ".concat(j&&j[0].id===c?"is-selected":""),onClick:function(){return r.focusNodeAction(c)},children:[Object(b.jsx)("div",{children:Object(b.jsx)(o.a,{variant:"body1",children:r.label})}),"event"===r.type&&(r.event?Object(b.jsx)(d.a,{variant:"contained",disabled:!0,className:"lbl-event",children:r.event.name}):r.btnLabel&&Object(b.jsx)(d.a,{onClick:function(e){r.btnAction(c),e.stopPropagation()},variant:"contained",children:r.btnLabel})),("condition"===r.type||"choice"===r.type)&&((null===(t=r.conditions)||void 0===t?void 0:t.length)>0?r.conditions.map((function(e,t){return Object(b.jsx)(a.a.Fragment,{children:Object(b.jsxs)("div",{className:"label-div",children:[Object(b.jsx)(d.a,{variant:"contained",disabled:!0,className:"lbl-condition",children:e.name}),Object(b.jsx)(l.a,{disableRipple:!0,onClick:function(){return r.handleDeleteCondition(c,e.id)},children:Object(b.jsx)(s.a,{})}),t!==r.conditions.length-1&&Object(b.jsx)(o.a,{variant:"h6",children:"AND"})]})},e.id)})):r.btnLabel&&Object(b.jsx)(d.a,{onClick:function(e){r.btnAction(c),e.stopPropagation()},variant:"contained",children:r.btnLabel})),r.type.includes("action")&&((null===(n=r.actions)||void 0===n?void 0:n.length)>0?r.actions.map((function(e,t){return Object(b.jsx)(a.a.Fragment,{children:Object(b.jsxs)("div",{className:"label-div",children:[Object(b.jsxs)(d.a,{variant:"contained",disabled:!0,className:"lbl-action",children:[e.name," - ",e.value]}),Object(b.jsx)(l.a,{disableRipple:!0,onClick:function(){return r.handleDeleteAction(e.id)},children:Object(b.jsx)(s.a,{})}),t!==r.actions.length-1&&Object(b.jsx)(o.a,{variant:"h6",children:"AND"})]})},e.id)})):r.btnLabel&&Object(b.jsx)(d.a,{onClick:function(e){r.btnAction(c),e.stopPropagation()},variant:"contained",children:r.btnLabel})),"choice"===r.type&&Object(b.jsx)(o.a,{variant:"h6",className:"text-or",children:"OR"}),r.btnLabel2&&Object(b.jsx)(d.a,{onClick:function(e){r.btnAction2(c),e.stopPropagation()},variant:"contained",children:r.btnLabel2}),Object(b.jsx)(i.a,{type:"source",position:"bottom",style:{bottom:10,top:"auto",background:"#555"},isConnectable:u})]})}))},126:function(e,t,n){},127:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var c=[{id:1,name:"New order placed"},{id:2,name:"New signup"},{id:3,name:"New subscriber"},{id:4,name:"New cancellation"}],a=[{id:1,name:"Amount > 100"},{id:2,name:"Amount < 100"},{id:3,name:"Product is Coffee"},{id:4,name:"Product is Tea"},{id:5,name:"Date > Today"},{id:6,name:"Date < Today"}],i=[{id:1,name:"Send email to Contact",type:"email",label:"Email address"},{id:2,name:"Call Contact",type:"tel",label:"Contact Number"},{id:3,name:"Add Tag to Contact",type:"tel",label:"Contact Number"},{id:4,name:"Remove Contact",type:"tel",label:"Contact Number"}]},151:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var c=n(40),a=n(18),i=n(142),o=n(113),d=n(1),r=n(114),s=n(175),l=n(176),b=n(178),u=n(41),j=n(118),O=n(123),f=n(125),v=n(127),h=(n(151),n(8)),p={btnSelectorNode:f.a};t.default=function(){var e=Object(d.useState)("events"),t=Object(o.a)(e,2),n=t[0],f=t[1],m=Object(d.useState)("1"),x=Object(o.a)(m,2),g=x[0],y=x[1],N=Object(d.useState)([]),S=Object(o.a)(N,2),A=S[0],C=S[1],I=Object(d.useState)({}),w=Object(o.a)(I,2),k=w[0],L=w[1],R=Object(d.useState)({}),D=Object(o.a)(R,2),P=D[0],F=D[1],T=Object(d.useState)(null),B=Object(o.a)(T,2),E=B[0],H=B[1],W=[{id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",btnLabel:"Select event trigger",focusNodeAction:function(e){f("events"),y(e)},btnAction:function(e){f("events"),y(e)}},position:{x:250,y:25}}],J=Object(d.useState)(W),G=Object(o.a)(J,2),K=G[0],M=G[1],q=Object(d.useRef)();q.current=K;var z=Object(d.useRef)();z.current=g;var Q=Object(d.useRef)();Q.current=k;var U=Object(d.useRef)();U.current=P;var V=function e(t,n){return{label:"Next Step",type:"choice",btnLabel:"Add condition",focusNodeAction:function(e){f(null),y(e)},btnAction:function(c){var a;f("conditions"),y(c);var o=Object.assign([],q.current);(a=o=o.filter((function(e){return e.id!==t&&e.id!=="edges-".concat((Number(t)-1).toString(),"-").concat(t)}))).push.apply(a,[{id:t,type:"btnSelectorNode",data:{label:"If...",type:"condition",btnLabel:"Add condition",focusNodeAction:function(e){f("conditions"),y(e)},btnAction:function(e){f("conditions"),y(e)},handleDeleteCondition:function(e,t){return X(e,t)}},position:n},{id:(Number(t)+1).toString(),type:"btnSelectorNode",data:{label:"Then...",type:"action-yes",btnLabel:"Add action",focusNodeAction:function(e){f("actions"),y(e)},btnAction:function(e){f("actions"),y(e)},handleDeleteAction:function(e,t){return Y(e,t)}},position:{x:n.x,y:n.y+400}},{id:(Number(t)+2).toString(),type:"btnSelectorNode",data:e((Number(t)+2).toString(),{x:n.x+300,y:n.y+150}),position:{x:n.x+300,y:n.y+150}}].concat(Object(i.a)("2"===t?[{id:"edges-".concat((Number(t)-1).toString(),"-").concat(t),source:(Number(t)-1).toString(),target:t,type:"smoothstep"}]:[]),[{id:"edges-".concat(t,"-").concat((Number(t)+1).toString()),source:t,target:(Number(t)+1).toString(),type:"smoothstep",label:"yes"},{id:"edges-".concat(t,"-").concat((Number(t)+2).toString()),source:t,target:(Number(t)+2).toString(),type:"smoothstep",label:"no"}])),M(o)},btnLabel2:"Add Action",btnAction2:function(e){var c;f("actions"),y(e);var a=Object.assign([],q.current);(c=a=a.filter((function(e){return e.id!==t&&e.id!=="edges-".concat((Number(t)-1).toString(),"-").concat(t)}))).push.apply(c,[{id:t,type:"btnSelectorNode",data:{label:"Then...",type:"action",btnLabel:"Add action",focusNodeAction:function(e){f("actions"),y(e)},btnAction:function(e){f("actions"),y(e)},handleDeleteAction:function(e,t){return Y(e,t)}},position:n}].concat(Object(i.a)("2"===t?[{id:"edges-".concat((Number(t)-1).toString(),"-").concat(t),source:(Number(t)-1).toString(),target:t,type:"smoothstep"}]:[]))),M(a)},handleDeleteCondition:function(e,t){return X(e,t)}}},X=function(e,t){var n,i,o,d=Object.assign([],q.current),r=d.findIndex((function(t){return t.id===e}));d[r]=Object(a.a)(Object(a.a)({},d[r]),{},{data:Object(a.a)(Object(a.a)({},null===(n=d[r])||void 0===n?void 0:n.data),{},{conditions:((null===(i=d[r])||void 0===i||null===(o=i.data)||void 0===o?void 0:o.conditions)||[]).filter((function(e){return e.id!==t}))})}),L(Object(a.a)(Object(a.a)({},Q.current),{},Object(c.a)({},z.current,(Q.current[z.current]||[]).filter((function(e){return e!==t}))))),M(d)},Y=function(e,t){var n,i=Object.assign([],q.current),o=i.findIndex((function(t){return t.id===e}));i[o]=Object(a.a)(Object(a.a)({},i[o]),{},{data:Object(a.a)(Object(a.a)({},i[o].data),{},{actions:((null===(n=i[o].data)||void 0===n?void 0:n.actions)||[]).filter((function(e){return e.id!==t}))})}),F(Object(a.a)(Object(a.a)({},U.current),{},Object(c.a)({},z.current,(U.current[z.current]||[]).filter((function(e){return e!==t}))))),M(i)};return Object(h.jsxs)(u.a,{fullHeight:!0,color:"HomePage grey100",children:[n&&Object(h.jsxs)("div",{className:"drawer",children:["events"===n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{children:Object(h.jsx)(l.a,{variant:"h3",children:"Events"})}),Object(h.jsx)(O.a,{type:"events",nodeId:g,listItems:v.c,selectedId:A,handleSelect:function(e){C([e]);var t=Object.assign([],K);t[0]={id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",event:v.c.find((function(t){return t.id===e})),focusNodeAction:function(e){f("events"),y(e)},btnAction:function(e){f("events"),y(e)}},position:{x:250,y:25}},1===t.length&&t.push({id:"2",type:"btnSelectorNode",data:V("2",{x:250,y:200}),position:{x:250,y:200}},{id:"edges-1-2",source:"1",target:"2",type:"smoothstep"}),f(null),M(t)}})]}),"conditions"===n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{children:Object(h.jsx)(l.a,{variant:"h3",children:"Conditions"})}),Object(h.jsx)(O.a,{type:"conditions",nodeId:g,listItems:v.b,selectedId:k,handleSelect:function(e){var t,n,o;L((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(c.a)({},g,[].concat(Object(i.a)(k[g]||[]),[e])))}));var d=Object.assign([],K),r=d.findIndex((function(e){return e.id===g}));d[r]=Object(a.a)(Object(a.a)({},d[r]),{},{data:Object(a.a)(Object(a.a)({},null===(t=d[r])||void 0===t?void 0:t.data),{},{conditions:[].concat(Object(i.a)((null===(n=d[r])||void 0===n||null===(o=n.data)||void 0===o?void 0:o.conditions)||[]),[v.b.find((function(t){return t.id===e}))])})}),M(d)}})]}),"actions"===n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{children:Object(h.jsx)(l.a,{variant:"h3",children:"Actions"})}),Object(h.jsx)(O.a,{type:"actions",nodeId:g,listItems:v.a,selectedId:P,onFocusId:null===E||void 0===E?void 0:E.id,handleSelect:function(e){H(v.a.find((function(t){return t.id===e})))}}),E&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{children:Object(h.jsx)(l.a,{variant:"h3",children:"Action Details"})}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)(b.a,{fullWidth:!0,margin:"dense",onChange:function(e){return H((function(t){return Object(a.a)(Object(a.a)({},t),{},{value:e.target.value})}))},type:E.type,value:E.value||"",label:E.label}),Object(h.jsx)(s.a,{variatn:"text",disableRipple:!0,onClick:function(){var e,t,n;F((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(c.a)({},g,[].concat(Object(i.a)(P[g]||[]),[E.id])))}));var o=Object.assign([],K),d=o.findIndex((function(e){return e.id===g}));o[d]=Object(a.a)(Object(a.a)({},o[d]),{},{data:Object(a.a)(Object(a.a)({},null===(e=o[d])||void 0===e?void 0:e.data),{},{actions:[].concat(Object(i.a)((null===(t=o[d])||void 0===t||null===(n=t.data)||void 0===n?void 0:n.actions)||[]),[E])})}),M(o)},children:"Add"})]})]})]})]}),Object(h.jsxs)("div",{className:"home-section",children:[Object(h.jsx)(j.a,{hasPreviewButton:!0,handleSave:function(){var e=K.filter((function(e){return"btnSelectorNode"===e.type})),t=[];e.forEach((function(e){switch(e.data.type){case"event":t.push({event:e.data.event});break;case"condition":t.push({condition:e.data.conditions});break;case"action-yes":case"action":t.push(Object(c.a)({},e.data.type,Object(i.a)(e.data.actions||[])))}})),console.log("output",t)},children:Object(h.jsx)(l.a,{variant:"h3",children:"Map your automation"})}),Object(h.jsx)("div",{className:"flow-body",children:Object(h.jsx)(r.c,{elementsSelectable:!0,elements:K,onElementsRemove:function(e){return M((function(t){return Object(r.d)(e,t)}))},onConnect:function(e){return M((function(t){return Object(r.b)(e,t)}))},nodeTypes:p,deleteKeyCode:46,onSelectionChange:function(e){e||f(null)}})})]})]})}}}]);
//# sourceMappingURL=4.c9597cc9.chunk.js.map