{"version":3,"sources":["components/common/CardHeader/CardHeader.js","constants/constants.js","components/sidePanel/Events/Events.js","components/sidePanel/Conditions/Conditions.js","components/sidePanel/Actions/Actions.js","components/ButtonSelectorNode/ButtonSelectorNode.js","views/home/HomePage.js"],"names":["CardHeader","props","handleSave","hasPreviewButton","handlePreview","children","rest","className","IconButton","disableRipple","Button","variant","onClick","SAMPLE_EVENT_TRIGGERS","eventKey","eventDisplay","fields","conditionKey","conditionDisplay","type","options","SAMPLE_ACTIONS","actionKey","actionDisplay","key","placeHolder","option","CONDITION_OPERATORS","name","value","SAMPLE_FLOW","operator","actionInputs","Events","handleSelect","selectedEventKey","useState","showMore","setShowMore","Typography","length","map","item","startIcon","endIcon","Conditions","selectedConditionObj","useEffect","setConditions","Object","keys","includes","values","setMustMeet","initialConditionObj","selectedEventFields","find","t","mustMeet","conditions","handleOnChange","index","keyName","tempConditions","assign","split","FormControl","InputLabel","id","Select","labelId","onChange","e","target","MenuItem","c","i","Fragment","splice","handleOnRemove","f","filter","o","TextField","fullWidth","margin","join","label","FormHelperText","result","Actions","selectedActionObj","handleAddAction","actionsArr","unavailableActionKeys","fieldKeyValue","setFieldKeyValue","setClickedAction","formatActionInputs","onFocusObj","reduce","obj","clickedAction","handleFieldInputChange","field","test","tempFieldKeyValue","action","opt","placeholder","entries","memo","data","isConnectable","selectedElements","useStoreState","store","focusNodeAction","disabled","btnLabel","btnAction","stopPropagation","handleSwapConditionArrows","cond","replace","a","handleSelectAction","ai","handleDeleteAction","btnLabel2","btnAction2","position","style","bottom","top","background","nodeTypes","btnSelectorNode","ButtonSelectorNode","HomePage","window","innerWidth","setModalState","title","subtitle","persistent","initEventNodeElement","nodeId","x","y","toString","setShowDrawer","setSelectedNode","initConditionNodeElement","initActionNodeElement","setSelectedActionIndex","itemIndex","setUnavailableActionKeys","unavailableActionKeysStateRef","current","k","initChoiceNodeElement","tempElems","elementsStateRef","Number","push","initNodeEdge","source","setElements","showDrawer","selectedNode","selectedActionIndex","elements","useRef","selectedNodeStateRef","tempElemIndex","findIndex","tempElements","yesNodeIndex","el","noNodeIndex","recursionFormObj","yesNodeId","noNodeId","recursionFromElement","conditionObj","Background","fullHeight","color","event","actionObj","slice","initialElements","sampleFlowConditions","output","noCondition","console","log","elementsSelectable","onElementsRemove","elementsToRemove","els","removeElements","onConnect","params","addEdge","onSelectionChange"],"mappings":"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","file":"static/js/4.06ddc304.chunk.js","sourcesContent":["import React from \"react\";\r\nimport InfoOutlinedIcon from \"@material-ui/icons/InfoOutlined\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport \"./CardHeader.scss\";\r\n\r\nconst CardHeader = props => {\r\n  const { handleSave, hasPreviewButton, handlePreview, children, ...rest } =\r\n    props;\r\n\r\n  return (\r\n    <div className={`CardHeader`} {...rest}>\r\n      <div className=\"left-section\">\r\n        {children}\r\n        <IconButton disableRipple>\r\n          <InfoOutlinedIcon />\r\n        </IconButton>\r\n      </div>\r\n      <div className=\"d-flex\">\r\n        {hasPreviewButton && (\r\n          <Button\r\n            variant=\"text\"\r\n            className=\"btn-preview\"\r\n            onClick={handlePreview}\r\n          >\r\n            View Preset Flow\r\n          </Button>\r\n        )}\r\n        {handleSave && (\r\n          <Button variant=\"contained\" onClick={handleSave}>\r\n            Save\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { CardHeader };\r\n","export const SAMPLE_EVENT_TRIGGERS = [\r\n  {\r\n    eventKey: \"NewOrder\",\r\n    eventDisplay: \"New order placed\",\r\n    fields: [\r\n      {\r\n        conditionKey: \"ProductTitle\",\r\n        conditionDisplay: \"Product Title\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        conditionKey: \"ProductAmount\",\r\n        conditionDisplay: \"Product Amount\",\r\n        type: \"int\"\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    eventKey: \"NewSignup\",\r\n    eventDisplay: \"New signup\",\r\n    fields: [\r\n      {\r\n        conditionKey: \"Gender\",\r\n        conditionDisplay: \"Customer Gender\",\r\n        type: \"option\",\r\n        options: [\"Male\", \"Female\"]\r\n      },\r\n      { conditionKey: \"DOB\", conditionDisplay: \"Birthday\", type: \"date\" }\r\n    ]\r\n  }\r\n];\r\n\r\nexport const SAMPLE_ACTIONS = [\r\n  {\r\n    actionKey: \"SendEmail\",\r\n    actionDisplay: \"Send email to contact\",\r\n    fields: [\r\n      { key: \"emailAddress\", placeHolder: \"Email Address\", type: \"string\" }\r\n    ]\r\n  },\r\n  {\r\n    actionKey: \"CallContact\",\r\n    actionDisplay: \"Call contact\",\r\n    fields: [\r\n      { key: \"callContact\", placeHolder: \"Contact Number\", type: \"string\" },\r\n      {\r\n        key: \"callContactCountry\",\r\n        placeHolder: \"Country\",\r\n        type: \"selection\",\r\n        option: [\"Singapore\", \"Malaysia\"]\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\nexport const CONDITION_OPERATORS = [\r\n  { name: \"Equal\", value: \"=\", type: \"string\" },\r\n  { name: \"Not equal\", value: \"!=\", type: \"string\" },\r\n  { name: \"Contains\", value: \"contains\", type: \"string\" },\r\n  { name: \"Not contains\", value: \"not contains\", type: \"string\" },\r\n  { name: \"Greater than\", value: \">\", type: \"int\" },\r\n  { name: \"Less than\", value: \"<\", type: \"int\" },\r\n  { name: \"Greater and equal than\", value: \">=\", type: \"int\" },\r\n  { name: \"Less and equal than\", value: \"<=\", type: \"int\" },\r\n  { name: \"Equal\", value: \"=\", type: \"date\" },\r\n  { name: \"Earlier than\", value: \"earlier than\", type: \"date\" },\r\n  { name: \"Later than\", value: \"later than\", type: \"date\" }\r\n];\r\n\r\nexport const SAMPLE_FLOW = {\r\n  eventKey: \"NewOrder\",\r\n  conditions: [\r\n    {\r\n      \"Fn::If\": [\r\n        [\r\n          {\r\n            \"Fn::And\": [\r\n              {\r\n                conditionKey: \"ProductTitle\",\r\n                value: [\"coke\", \"pepsi\"],\r\n                operator: \"contains\"\r\n              },\r\n              {\r\n                conditionKey: \"ProductAmount\",\r\n                value: [\"30\"],\r\n                operator: \">=\"\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [\r\n          {\r\n            \"Fn::If\": [\r\n              [\r\n                {\r\n                  conditionKey: \"ProductTitle\",\r\n                  value: [\"coke\"],\r\n                  operator: \"=\"\r\n                }\r\n              ],\r\n              [\r\n                {\r\n                  actionKey: \"CallContact\",\r\n                  actionInputs: [\r\n                    {\r\n                      key: \"callContact\",\r\n                      value: \"999\"\r\n                    },\r\n                    {\r\n                      key: \"callContactCountry\",\r\n                      value: \"Singapore\"\r\n                    }\r\n                  ]\r\n                }\r\n              ],\r\n              [\r\n                {\r\n                  actionKey: \"SendEmail\",\r\n                  actionInputs: [\r\n                    {\r\n                      key: \"emailAddress\",\r\n                      value: \"simon@gmail.com\"\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            ]\r\n          }\r\n        ],\r\n        [\r\n          {\r\n            actionKey: \"CallContact\",\r\n            actionInputs: [\r\n              {\r\n                key: \"callContact\",\r\n                value: \"0123456789\"\r\n              },\r\n              {\r\n                key: \"callContactCountry\",\r\n                value: \"Malaysia\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            actionKey: \"SendEmail\",\r\n            actionInputs: [\r\n              {\r\n                key: \"emailAddress\",\r\n                value: \"hello@gmail.com\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      ]\r\n    }\r\n  ]\r\n};\r\n","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { CardHeader } from \"components/common/CardHeader/CardHeader\";\r\nimport AddBoxOutlinedIcon from \"@material-ui/icons/AddBoxOutlined\";\r\nimport KeyboardArrowUpOutlinedIcon from \"@material-ui/icons/KeyboardArrowUpOutlined\";\r\nimport KeyboardArrowDownOutlinedIcon from \"@material-ui/icons/KeyboardArrowDownOutlined\";\r\nimport { SAMPLE_EVENT_TRIGGERS } from \"constants/constants\";\r\n\r\nimport \"./Events.scss\";\r\n\r\nconst Events = props => {\r\n  const { handleSelect, selectedEventKey, ...rest } = props;\r\n  const [showMore, setShowMore] = useState(false);\r\n\r\n  return (\r\n    <div className={`Events`} {...rest}>\r\n      <CardHeader>\r\n        <Typography variant=\"h3\">Events</Typography>\r\n      </CardHeader>\r\n\r\n      <div\r\n        className={`content-body ${\r\n          SAMPLE_EVENT_TRIGGERS.length > 3 ? \"has-show-more\" : \"\"\r\n        } ${showMore ? \"show-all\" : \"\"}`}\r\n        {...rest}\r\n      >\r\n        {SAMPLE_EVENT_TRIGGERS.map(item => (\r\n          <Button\r\n            key={item.eventKey}\r\n            onClick={() => handleSelect(item)}\r\n            disableRipple\r\n            variant=\"text\"\r\n            className={`btn-card-item ${\r\n              selectedEventKey === item.eventKey ? \"on-focus\" : \"\"\r\n            }`}\r\n            startIcon={<AddBoxOutlinedIcon />}\r\n          >\r\n            {item.eventDisplay}\r\n          </Button>\r\n        ))}\r\n      </div>\r\n\r\n      {SAMPLE_EVENT_TRIGGERS.length > 3 && (\r\n        <div className=\"btn-show-more\">\r\n          <Button\r\n            onClick={() => setShowMore(!showMore)}\r\n            variant=\"text\"\r\n            disableRipple\r\n            endIcon={\r\n              showMore ? (\r\n                <KeyboardArrowUpOutlinedIcon />\r\n              ) : (\r\n                <KeyboardArrowDownOutlinedIcon />\r\n              )\r\n            }\r\n          >\r\n            Show {showMore ? \"less\" : \"more\"}\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nEvents.propTypes = {\r\n  selectedEventKey: PropTypes.string,\r\n  handleSelect: PropTypes.func\r\n};\r\nexport { Events };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport AddBoxOutlinedIcon from \"@material-ui/icons/AddBoxOutlined\";\r\nimport { CardHeader } from \"components/common/CardHeader/CardHeader\";\r\nimport {\r\n  SAMPLE_EVENT_TRIGGERS,\r\n  CONDITION_OPERATORS\r\n} from \"constants/constants\";\r\n\r\nimport \"./Conditions.scss\";\r\n\r\nconst Conditions = props => {\r\n  const { selectedEventKey, selectedConditionObj, handleSelect, ...rest } =\r\n    props;\r\n\r\n  useEffect(() => {\r\n    setConditions(\r\n      Object.keys(selectedConditionObj)[0]?.includes(\"Fn::\")\r\n        ? Object.values(selectedConditionObj)[0]\r\n        : [\r\n            {\r\n              conditionKey: selectedConditionObj.conditionKey || \"\",\r\n              value: selectedConditionObj.value || [],\r\n              operator: selectedConditionObj.operator || \"\"\r\n            }\r\n          ]\r\n    );\r\n    setMustMeet(\r\n      Object.keys(selectedConditionObj)[0]?.includes(\"Fn::\")\r\n        ? Object.keys(selectedConditionObj)[0]\r\n        : \"\"\r\n    );\r\n  }, [selectedConditionObj]);\r\n\r\n  const initialConditionObj = {\r\n    conditionKey: \"\",\r\n    value: [],\r\n    operator: \"\"\r\n  };\r\n\r\n  const selectedEventFields = SAMPLE_EVENT_TRIGGERS.find(\r\n    t => t.eventKey === selectedEventKey\r\n  ).fields;\r\n\r\n  const [mustMeet, setMustMeet] = useState(\"\");\r\n  const [conditions, setConditions] = useState([\r\n    {\r\n      conditionKey: \"\",\r\n      value: [],\r\n      operator: \"\"\r\n    }\r\n  ]);\r\n\r\n  const handleOnAdd = () => {\r\n    if (!mustMeet) {\r\n      setMustMeet(\"Fn::And\");\r\n    }\r\n    setConditions([...conditions, initialConditionObj]);\r\n  };\r\n\r\n  const handleOnSave = () => {\r\n    const result = mustMeet ? { [mustMeet]: conditions } : conditions[0];\r\n    handleSelect(result);\r\n  };\r\n\r\n  const handleOnRemove = index => {\r\n    if (conditions.length === 2) {\r\n      setMustMeet(\"\");\r\n    }\r\n    const tempConditions = Object.assign([], conditions);\r\n    tempConditions.splice(index, 1);\r\n    setConditions(tempConditions);\r\n  };\r\n\r\n  const handleOnChange = (value, index, keyName) => {\r\n    const tempConditions = Object.assign([], conditions);\r\n    if (keyName === \"value\") {\r\n      tempConditions[index].value = value.split(\",\");\r\n    } else {\r\n      tempConditions[index][keyName] = value;\r\n    }\r\n    setConditions(tempConditions);\r\n  };\r\n\r\n  return (\r\n    <div className={`Conditions`} {...rest}>\r\n      <CardHeader>\r\n        <Typography variant=\"h3\">Conditions</Typography>\r\n      </CardHeader>\r\n\r\n      <div className={`content-body`} {...rest}>\r\n        {conditions.length > 1 && (\r\n          <FormControl className=\"mb-1-5\">\r\n            <InputLabel id={`label-must-meet`}>\r\n              All conditions must meet\r\n            </InputLabel>\r\n            <Select\r\n              labelId={`label-must-meet`}\r\n              id=\"must-meet\"\r\n              value={mustMeet}\r\n              onChange={e => setMustMeet(e.target.value)}\r\n            >\r\n              <MenuItem value=\"Fn::And\">AND</MenuItem>\r\n              <MenuItem value=\"Fn::Or\">OR</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        )}\r\n\r\n        {conditions.map((c, i) => (\r\n          <React.Fragment key={i}>\r\n            {i !== 0 && (\r\n              <Button\r\n                className=\"btn-clear\"\r\n                variant=\"text\"\r\n                startIcon={<ClearIcon />}\r\n                disableRipple\r\n                onClick={() => handleOnRemove(i)}\r\n              >\r\n                Remove\r\n              </Button>\r\n            )}\r\n            <FormControl>\r\n              <InputLabel id={`label-condition-${i}`}>\r\n                Condition {i + 1}\r\n              </InputLabel>\r\n              <Select\r\n                labelId={`label-condition-${i}`}\r\n                id={`condition-${i}`}\r\n                value={c.conditionKey || \"\"}\r\n                onChange={e =>\r\n                  handleOnChange(e.target.value, i, \"conditionKey\")\r\n                }\r\n              >\r\n                {selectedEventFields.map(item => (\r\n                  <MenuItem key={item.conditionKey} value={item.conditionKey}>\r\n                    {item.conditionDisplay}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n\r\n            <FormControl>\r\n              <InputLabel id={`label-operator-${i}`}>\r\n                Operator {i + 1}\r\n              </InputLabel>\r\n              <Select\r\n                labelId={`label-operator-${i}`}\r\n                id={`operator-${i}`}\r\n                value={c.operator || \"\"}\r\n                onChange={e => handleOnChange(e.target.value, i, \"operator\")}\r\n              >\r\n                {selectedEventFields.find(\r\n                  f => f.conditionKey === c.conditionKey\r\n                )?.type === \"option\"\r\n                  ? selectedEventFields\r\n                      .find(f => f.conditionKey === c.conditionKey)\r\n                      .options.map(option => (\r\n                        <MenuItem key={option} value={option}>\r\n                          {option}\r\n                        </MenuItem>\r\n                      ))\r\n                  : CONDITION_OPERATORS.filter(\r\n                      o =>\r\n                        o.type ===\r\n                        selectedEventFields.find(\r\n                          f => f.conditionKey === c.conditionKey\r\n                        )?.type\r\n                    )?.map(operator => (\r\n                      <MenuItem key={operator.value} value={operator.value}>\r\n                        {operator.name}\r\n                      </MenuItem>\r\n                    ))}\r\n              </Select>\r\n            </FormControl>\r\n\r\n            <FormControl>\r\n              <TextField\r\n                fullWidth\r\n                margin=\"dense\"\r\n                onChange={e => handleOnChange(e.target.value, i, \"value\")}\r\n                type={\"text\"}\r\n                value={c.value.join(\",\") || \"\"}\r\n                label={`Value ${i + 1}`}\r\n              />\r\n              <FormHelperText>\r\n                Please separate multiple values by comma\r\n              </FormHelperText>\r\n            </FormControl>\r\n\r\n            {conditions.length - 1 !== i && (\r\n              <Typography variant=\"h6\" className=\"must-meet-separator\">\r\n                {mustMeet === \"Fn::And\" ? \"AND\" : \"OR\"}\r\n              </Typography>\r\n            )}\r\n          </React.Fragment>\r\n        ))}\r\n\r\n        <Button\r\n          variant=\"text\"\r\n          startIcon={<AddBoxOutlinedIcon />}\r\n          disableRipple\r\n          className=\"btn-add\"\r\n          onClick={handleOnAdd}\r\n        >\r\n          Add Condition\r\n        </Button>\r\n        <Button variant=\"contained\" disableRipple onClick={handleOnSave}>\r\n          Save Condition\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nConditions.propTypes = {\r\n  selectedEventKey: PropTypes.string,\r\n  selectedConditionObj: PropTypes.object,\r\n  handleSelect: PropTypes.func\r\n};\r\nexport { Conditions };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { CardHeader } from \"components/common/CardHeader/CardHeader\";\r\nimport AddBoxOutlinedIcon from \"@material-ui/icons/AddBoxOutlined\";\r\nimport KeyboardArrowUpOutlinedIcon from \"@material-ui/icons/KeyboardArrowUpOutlined\";\r\nimport KeyboardArrowDownOutlinedIcon from \"@material-ui/icons/KeyboardArrowDownOutlined\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { SAMPLE_ACTIONS } from \"constants/constants\";\r\n\r\nimport \"./Actions.scss\";\r\n\r\nconst Actions = props => {\r\n  const {\r\n    handleSelect,\r\n    handleAddAction,\r\n    actionsArr,\r\n    selectedActionObj,\r\n    unavailableActionKeys,\r\n    ...rest\r\n  } = props;\r\n\r\n  const [fieldKeyValue, setFieldKeyValue] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(selectedActionObj).length) {\r\n      setClickedAction(formatActionInputs(selectedActionObj));\r\n    } else {\r\n      setClickedAction({});\r\n      setFieldKeyValue({});\r\n    }\r\n  }, [selectedActionObj]);\r\n\r\n  const formatActionInputs = onFocusObj => {\r\n    setFieldKeyValue(\r\n      onFocusObj.actionInputs.reduce((map, obj) => {\r\n        map[obj.key] = obj.value;\r\n        return map;\r\n      }, {})\r\n    );\r\n    return SAMPLE_ACTIONS.find(f => f.actionKey === onFocusObj.actionKey);\r\n  };\r\n\r\n  const [clickedAction, setClickedAction] = useState({});\r\n  const [showMore, setShowMore] = useState(false);\r\n\r\n  const handleOnClickAction = action => {\r\n    setClickedAction(action);\r\n  };\r\n\r\n  const handleOnAddOrUpdate = () => {\r\n    const result = {\r\n      actionKey: clickedAction.actionKey,\r\n      actionInputs: Object.entries(fieldKeyValue).map(f => ({\r\n        key: f[0],\r\n        value: f[1]\r\n      }))\r\n    };\r\n    handleSelect(\r\n      result,\r\n      Object.keys(selectedActionObj).length ? \"update\" : \"add\"\r\n    );\r\n  };\r\n\r\n  const handleFieldInputChange = (e, field) => {\r\n    if (field.key === \"callContact\" && !/^[0-9]*$/.test(e.target.value)) {\r\n      return;\r\n    }\r\n    const tempFieldKeyValue = Object.assign({}, fieldKeyValue);\r\n    tempFieldKeyValue[field.key] = e.target.value;\r\n    setFieldKeyValue(tempFieldKeyValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={`Actions`} {...rest}>\r\n        <CardHeader>\r\n          <Typography variant=\"h3\">Actions</Typography>\r\n        </CardHeader>\r\n\r\n        <div\r\n          className={`content-body ${\r\n            SAMPLE_ACTIONS.length > 3 ? \"has-show-more\" : \"\"\r\n          } ${showMore ? \"show-all\" : \"\"}`}\r\n          {...rest}\r\n        >\r\n          {SAMPLE_ACTIONS.filter(\r\n            action => !unavailableActionKeys.includes(action.actionKey)\r\n          ).map(item => (\r\n            <Button\r\n              key={item.actionKey}\r\n              onClick={() => handleOnClickAction(item)}\r\n              disableRipple\r\n              variant=\"text\"\r\n              className={`btn-card-item ${\r\n                clickedAction?.actionKey === item.actionKey ? \"on-focus\" : \"\"\r\n              }`}\r\n              startIcon={<AddBoxOutlinedIcon />}\r\n            >\r\n              {item.actionDisplay}\r\n            </Button>\r\n          ))}\r\n\r\n          {!SAMPLE_ACTIONS.filter(\r\n            action => !unavailableActionKeys.includes(action.actionKey)\r\n          ).length && (\r\n            <Typography variant=\"body1\" className=\"label-no-more\">\r\n              No action available\r\n            </Typography>\r\n          )}\r\n        </div>\r\n\r\n        {SAMPLE_ACTIONS.length > 3 && (\r\n          <div className=\"btn-show-more\">\r\n            <Button\r\n              onClick={() => setShowMore(!showMore)}\r\n              variant=\"text\"\r\n              disableRipple\r\n              endIcon={\r\n                showMore ? (\r\n                  <KeyboardArrowUpOutlinedIcon />\r\n                ) : (\r\n                  <KeyboardArrowDownOutlinedIcon />\r\n                )\r\n              }\r\n            >\r\n              Show {showMore ? \"less\" : \"more\"}\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {Object.keys(clickedAction).length > 0 && (\r\n        <>\r\n          <CardHeader>\r\n            <Typography variant=\"h3\">Action Details</Typography>\r\n          </CardHeader>\r\n          <div className=\"card-body\">\r\n            {clickedAction.fields.map(field =>\r\n              field.type === \"selection\" ? (\r\n                <FormControl key={field.key}>\r\n                  <InputLabel id={`label-${field.key}`}>\r\n                    {field.placeHolder}\r\n                  </InputLabel>\r\n                  <Select\r\n                    labelId={`label-${field.key}`}\r\n                    id={field.key}\r\n                    value={fieldKeyValue[field.key] || \"\"}\r\n                    onChange={e => handleFieldInputChange(e, field)}\r\n                  >\r\n                    {field.option.map(opt => (\r\n                      <MenuItem key={opt} value={opt}>\r\n                        {opt}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              ) : (\r\n                <TextField\r\n                  key={field.key}\r\n                  fullWidth\r\n                  margin=\"dense\"\r\n                  onChange={e => handleFieldInputChange(e, field)}\r\n                  type={\"text\"}\r\n                  value={fieldKeyValue[field.key] || \"\"}\r\n                  label={field.placeHolder}\r\n                  placeholder={field.placeHolder}\r\n                />\r\n              )\r\n            )}\r\n            <Button\r\n              variant=\"contained\"\r\n              className=\"mt-1\"\r\n              disableRipple\r\n              onClick={handleOnAddOrUpdate}\r\n            >\r\n              {Object.keys(selectedActionObj).length ? \"Update\" : \"Add\"}\r\n            </Button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nActions.propTypes = {\r\n  handleSelect: PropTypes.func,\r\n  handleAddAction: PropTypes.func,\r\n  unavailableActionKeys: PropTypes.array,\r\n  actionsArr: PropTypes.array,\r\n  selectedActionObj: PropTypes.object\r\n};\r\nexport { Actions };\r\n","import React, { memo } from \"react\";\r\n\r\nimport { Handle, useStoreState } from \"react-flow-renderer\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport LoopIcon from \"@material-ui/icons/Loop\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport \"./ButtonSelectorNode.scss\";\r\n\r\nexport default memo(({ id, data, isConnectable }) => {\r\n  const selectedElements = useStoreState(store => store.selectedElements);\r\n\r\n  return (\r\n    <div\r\n      className={`ButtonSelectorNode ${\r\n        selectedElements && selectedElements[0].id === id ? \"is-selected\" : \"\"\r\n      }`}\r\n      onClick={() => data.focusNodeAction(id)}\r\n    >\r\n      <div>\r\n        <Typography variant=\"body1\">{data.label}</Typography>\r\n      </div>\r\n\r\n      {/* Event type */}\r\n      {data.type === \"event\" &&\r\n        (data.item ? (\r\n          <Button variant=\"contained\" disabled className=\"lbl-event\">\r\n            {data.item?.eventDisplay}\r\n          </Button>\r\n        ) : (\r\n          data.btnLabel && (\r\n            <Button\r\n              onClick={e => {\r\n                data.btnAction(id);\r\n                e.stopPropagation();\r\n              }}\r\n              variant=\"contained\"\r\n            >\r\n              {data.btnLabel}\r\n            </Button>\r\n          )\r\n        ))}\r\n\r\n      {/* Condition or Choice type */}\r\n      {(data.type === \"condition\" || data.type === \"choice\") && (\r\n        <>\r\n          {data.type === \"condition\" && (\r\n            <IconButton\r\n              disableRipple\r\n              className=\"btn-swap\"\r\n              onClick={e => {\r\n                data.handleSwapConditionArrows(id);\r\n                e.stopPropagation();\r\n              }}\r\n            >\r\n              <LoopIcon />\r\n            </IconButton>\r\n          )}\r\n          {data.item ? (\r\n            <Button variant=\"contained\" disabled className=\"lbl-condition\">\r\n              {Object.keys(data.item)[0].includes(\"Fn::\")\r\n                ? Object.values(data.item)[0]\r\n                    .map(\r\n                      cond =>\r\n                        `${cond.conditionKey} ${\r\n                          cond.operator\r\n                        } ${cond.value.join(\", \")}`\r\n                    )\r\n                    .join(` ${Object.keys(data.item)[0].replace(\"Fn::\", \"\")} `)\r\n                : `${data.item.conditionKey} ${\r\n                    data.item.operator\r\n                  } ${data.item.value.join(\", \")}`}\r\n            </Button>\r\n          ) : (\r\n            data.btnLabel && (\r\n              <Button\r\n                onClick={e => {\r\n                  data.btnAction(id);\r\n                  e.stopPropagation();\r\n                }}\r\n                variant=\"contained\"\r\n              >\r\n                {data.btnLabel}\r\n              </Button>\r\n            )\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Action Type */}\r\n      {data.type === \"action\" &&\r\n        (data.item?.length ? (\r\n          <>\r\n            {data.item.map((a, i) => (\r\n              <React.Fragment key={i}>\r\n                <div className=\"label-div\">\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    onClick={e => {\r\n                      data.handleSelectAction(id, i);\r\n                      e.stopPropagation();\r\n                    }}\r\n                    className=\"lbl-action\"\r\n                  >\r\n                    {`Action: ${a.actionKey}\r\n                    ${a.actionInputs\r\n                      .map(ai => `${ai.key} - ${ai.value}`)\r\n                      .join(\", \")}`}\r\n                  </Button>\r\n                  <IconButton\r\n                    disableRipple\r\n                    onClick={e => {\r\n                      data.handleDeleteAction(id, i, a.actionKey);\r\n                      e.stopPropagation();\r\n                    }}\r\n                  >\r\n                    <HighlightOffIcon />\r\n                  </IconButton>\r\n                  {i !== data.item.length - 1 && (\r\n                    <Typography variant=\"h6\">AND</Typography>\r\n                  )}\r\n                </div>\r\n              </React.Fragment>\r\n            ))}\r\n\r\n            <Button\r\n              onClick={e => {\r\n                data.btnAction(id);\r\n                e.stopPropagation();\r\n              }}\r\n              variant=\"contained\"\r\n            >\r\n              Add Action\r\n            </Button>\r\n          </>\r\n        ) : (\r\n          data.btnLabel && (\r\n            <Button\r\n              onClick={e => {\r\n                data.btnAction(id);\r\n                e.stopPropagation();\r\n              }}\r\n              variant=\"contained\"\r\n            >\r\n              {data.btnLabel}\r\n            </Button>\r\n          )\r\n        ))}\r\n\r\n      {data.type === \"choice\" && (\r\n        <Typography variant=\"h6\" className=\"text-or\">\r\n          OR\r\n        </Typography>\r\n      )}\r\n\r\n      {data.btnLabel2 && (\r\n        <Button\r\n          onClick={e => {\r\n            data.btnAction2(id);\r\n            e.stopPropagation();\r\n          }}\r\n          variant=\"contained\"\r\n        >\r\n          {data.btnLabel2}\r\n        </Button>\r\n      )}\r\n\r\n      <Handle\r\n        type=\"source\"\r\n        position=\"bottom\"\r\n        style={{ bottom: 10, top: \"auto\", background: \"#555\" }}\r\n        isConnectable={isConnectable}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport ReactFlow, { removeElements, addEdge } from \"react-flow-renderer\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Events } from \"components/sidePanel/Events/Events\";\r\nimport { Conditions } from \"components/sidePanel/Conditions/Conditions\";\r\nimport { Actions } from \"components/sidePanel/Actions/Actions\";\r\nimport { Background } from \"components/common/Background/Background\";\r\nimport { CardHeader } from \"components/common/CardHeader/CardHeader\";\r\nimport ButtonSelectorNode from \"components/ButtonSelectorNode/ButtonSelectorNode\";\r\nimport { SAMPLE_EVENT_TRIGGERS, SAMPLE_FLOW } from \"constants/constants\";\r\nimport { setModalState } from \"states/modalState\";\r\n\r\nimport \"./HomePage.scss\";\r\n\r\nconst nodeTypes = {\r\n  btnSelectorNode: ButtonSelectorNode\r\n};\r\n\r\nfunction HomePage() {\r\n  useEffect(() => {\r\n    if (window.innerWidth < 768) {\r\n      setModalState({\r\n        title: \"Warning\",\r\n        subtitle: \"Device must be larger than 768px x 1024px to support flow\",\r\n        persistent: true\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const initEventNodeElement = (\r\n    item,\r\n    nodeId = 1,\r\n    position = { x: 250, y: 25 }\r\n  ) => ({\r\n    id: nodeId.toString(),\r\n    position,\r\n    type: \"btnSelectorNode\",\r\n    data: {\r\n      item,\r\n      type: \"event\",\r\n      label: \"When\",\r\n      btnLabel: \"Select Event Trigger\",\r\n      focusNodeAction: id => {\r\n        setShowDrawer(\"events\");\r\n        setSelectedNode(id);\r\n      },\r\n      btnAction: id => {\r\n        setShowDrawer(\"events\");\r\n        setSelectedNode(id);\r\n      }\r\n    }\r\n  });\r\n\r\n  const initConditionNodeElement = (\r\n    item,\r\n    nodeId = 1,\r\n    position = { x: 250, y: 25 }\r\n  ) => ({\r\n    id: nodeId.toString(),\r\n    position,\r\n    type: \"btnSelectorNode\",\r\n    data: {\r\n      item,\r\n      type: \"condition\",\r\n      label: \"If...\",\r\n      btnLabel: \"Add condition\",\r\n      focusNodeAction: id => {\r\n        setShowDrawer(\"conditions\");\r\n        setSelectedNode(id);\r\n      },\r\n      handleSwapConditionArrows: id => handleSwapConditionArrows(id),\r\n      btnAction: id => {\r\n        setShowDrawer(\"conditions\");\r\n        setSelectedNode(id);\r\n      }\r\n    }\r\n  });\r\n\r\n  const initActionNodeElement = (\r\n    item,\r\n    nodeId = 1,\r\n    position = { x: 250, y: 25 }\r\n  ) => ({\r\n    id: nodeId.toString(),\r\n    position,\r\n    type: \"btnSelectorNode\",\r\n    data: {\r\n      item,\r\n      type: \"action\",\r\n      label: \"Then...\",\r\n      btnLabel: \"Add action\",\r\n      focusNodeAction: id => {\r\n        setShowDrawer(null);\r\n        setSelectedActionIndex(null);\r\n        setSelectedNode(id);\r\n      },\r\n      btnAction: id => {\r\n        setShowDrawer(\"actions\");\r\n        setSelectedActionIndex(null);\r\n        setSelectedNode(id);\r\n      },\r\n      handleSelectAction: (id, itemIndex) => {\r\n        setShowDrawer(\"actions\");\r\n        setSelectedNode(id);\r\n        handleSelectAction(itemIndex);\r\n      },\r\n      handleDeleteAction: (id, itemIndex, actionKey) => {\r\n        setUnavailableActionKeys(\r\n          unavailableActionKeysStateRef.current.filter(k => k !== actionKey)\r\n        );\r\n        setSelectedNode(id);\r\n        handleDeleteAction(id, itemIndex);\r\n      }\r\n    }\r\n  });\r\n\r\n  const initChoiceNodeElement = (nodeId = 1, position = { x: 250, y: 25 }) => ({\r\n    id: nodeId.toString(),\r\n    position,\r\n    type: \"btnSelectorNode\",\r\n    data: {\r\n      type: \"choice\",\r\n      label: \"Next Step\",\r\n      btnLabel: \"Add condition\",\r\n      btnLabel2: \"Add action\",\r\n      focusNodeAction: id => {\r\n        setShowDrawer(null);\r\n        setSelectedNode(id);\r\n      },\r\n      btnAction: id => {\r\n        setShowDrawer(\"conditions\");\r\n        setSelectedNode(id);\r\n\r\n        let tempElems = Object.assign([], elementsStateRef.current);\r\n        tempElems = tempElems.filter(\r\n          t =>\r\n            t.id !== nodeId &&\r\n            t.id !== `edges-${(Number(nodeId) - 1).toString()}-${nodeId}`\r\n        );\r\n        tempElems.push(\r\n          initConditionNodeElement(null, nodeId, position), // 2\r\n          initActionNodeElement(null, Number(nodeId) + 1, {\r\n            // 3 = yes\r\n            x: position.x,\r\n            y: position.y + 400\r\n          }),\r\n          initChoiceNodeElement((Number(nodeId) + 2).toString(), {\r\n            x: position.x + 300,\r\n            y: position.y + 150\r\n          }),\r\n          ...(nodeId === \"2\"\r\n            ? [\r\n                initNodeEdge({\r\n                  source: (Number(nodeId) - 1).toString(),\r\n                  target: nodeId\r\n                })\r\n              ]\r\n            : []),\r\n          initNodeEdge({\r\n            source: nodeId,\r\n            target: (Number(nodeId) + 1).toString(), // edges-2-3\r\n            label: \"yes\"\r\n          }),\r\n          initNodeEdge({\r\n            source: nodeId,\r\n            target: (Number(nodeId) + 2).toString(), // edges-2-4\r\n            label: \"no\"\r\n          })\r\n        );\r\n        setElements(tempElems);\r\n      },\r\n      btnAction2: id => {\r\n        setShowDrawer(\"actions\");\r\n        setSelectedNode(id);\r\n\r\n        let tempElems = Object.assign([], elementsStateRef.current);\r\n        tempElems = tempElems.filter(\r\n          t =>\r\n            t.id !== nodeId &&\r\n            t.id !== `edges-${(Number(nodeId) - 1).toString()}-${nodeId}` // edges-1-2\r\n        );\r\n        tempElems.push(\r\n          initActionNodeElement(null, nodeId, position),\r\n          ...(nodeId === \"2\"\r\n            ? [\r\n                initNodeEdge({\r\n                  source: (Number(nodeId) - 1).toString(),\r\n                  target: nodeId\r\n                })\r\n              ]\r\n            : [])\r\n        );\r\n\r\n        setElements(tempElems);\r\n      }\r\n    }\r\n  });\r\n\r\n  const initNodeEdge = ({ source, target, label }) => ({\r\n    id: `edges-${source}-${target}`, // edges-1-2\r\n    source: source.toString(),\r\n    target: target.toString(),\r\n    type: \"smoothstep\",\r\n    label\r\n  });\r\n\r\n  const [showDrawer, setShowDrawer] = useState(\"events\");\r\n  const [selectedNode, setSelectedNode] = useState(\"1\");\r\n  const [selectedActionIndex, setSelectedActionIndex] = useState(null);\r\n  const [unavailableActionKeys, setUnavailableActionKeys] = useState([]);\r\n  const [elements, setElements] = useState([initEventNodeElement()]);\r\n  const onElementsRemove = elementsToRemove =>\r\n    setElements(els => removeElements(elementsToRemove, els));\r\n  const onConnect = params => setElements(els => addEdge(params, els));\r\n\r\n  const elementsStateRef = useRef();\r\n  elementsStateRef.current = elements;\r\n  const selectedNodeStateRef = useRef();\r\n  selectedNodeStateRef.current = selectedNode;\r\n  const unavailableActionKeysStateRef = useRef();\r\n  unavailableActionKeysStateRef.current = unavailableActionKeys;\r\n\r\n  const handleEventChange = event => {\r\n    // setFlow({ ...flow, eventKey: event.eventKey });\r\n    let tempElems = Object.assign([], elementsStateRef.current);\r\n    tempElems[0] = initEventNodeElement(event);\r\n\r\n    if (tempElems.length === 1) {\r\n      tempElems.push(\r\n        initChoiceNodeElement(\"2\", { x: 250, y: 200 }),\r\n        initNodeEdge({\r\n          source: \"1\",\r\n          target: \"2\"\r\n        })\r\n      );\r\n    }\r\n    setShowDrawer(null);\r\n    setElements(tempElems);\r\n  };\r\n\r\n  const handleConditionChange = conditionObj => {\r\n    let tempElems = Object.assign([], elementsStateRef.current);\r\n    let tempElemIndex = tempElems.findIndex(\r\n      t => t.id === selectedNodeStateRef.current\r\n    );\r\n    tempElems[tempElemIndex] = {\r\n      ...tempElems[tempElemIndex],\r\n      data: {\r\n        ...tempElems[tempElemIndex]?.data,\r\n        item: conditionObj\r\n      }\r\n    };\r\n    setElements(tempElems);\r\n  };\r\n\r\n  // type = add / update\r\n  const handleActionChange = (actionObj, type) => {\r\n    let tempElems = Object.assign([], elementsStateRef.current);\r\n    let tempElemIndex = tempElems.findIndex(\r\n      t => t.id === selectedNodeStateRef.current\r\n    );\r\n    tempElems[tempElemIndex] = {\r\n      ...tempElems[tempElemIndex],\r\n      data: {\r\n        ...tempElems[tempElemIndex]?.data,\r\n        item:\r\n          type === \"update\"\r\n            ? [\r\n                ...tempElems[tempElemIndex]?.data?.item.slice(\r\n                  0,\r\n                  selectedActionIndex\r\n                ),\r\n                actionObj,\r\n                ...tempElems[tempElemIndex]?.data?.item.slice(\r\n                  selectedActionIndex + 1\r\n                )\r\n              ]\r\n            : [...(tempElems[tempElemIndex]?.data?.item || []), actionObj]\r\n      }\r\n    };\r\n    setUnavailableActionKeys([...unavailableActionKeys, actionObj.actionKey]);\r\n    setElements(tempElems);\r\n  };\r\n\r\n  const handleSelectAction = itemIndex => {\r\n    setSelectedActionIndex(itemIndex);\r\n  };\r\n\r\n  const handleDeleteAction = (nodeId, itemIndex) => {\r\n    let tempElems = Object.assign([], elementsStateRef.current);\r\n    let tempElemIndex = tempElems.findIndex(t => t.id === nodeId);\r\n    tempElems[tempElemIndex] = {\r\n      ...tempElems[tempElemIndex],\r\n      data: {\r\n        ...tempElems[tempElemIndex]?.data,\r\n        item: (tempElems[tempElemIndex]?.data?.item || []).filter(\r\n          (x, i) => i !== itemIndex\r\n        )\r\n      }\r\n    };\r\n    setElements(tempElems);\r\n    setShowDrawer(null);\r\n  };\r\n\r\n  const handleSwapConditionArrows = nodeId => {\r\n    const tempElements = Object.assign([], elementsStateRef.current);\r\n    const yesNodeIndex = tempElements.findIndex(\r\n      el => el.source === nodeId && el.label === \"yes\"\r\n    );\r\n    const noNodeIndex = tempElements.findIndex(\r\n      el => el.source === nodeId && el.label === \"no\"\r\n    );\r\n    tempElements[yesNodeIndex].label =\r\n      tempElements[yesNodeIndex].label === \"yes\" ? \"no\" : \"yes\";\r\n    tempElements[noNodeIndex].label =\r\n      tempElements[noNodeIndex].label === \"yes\" ? \"no\" : \"yes\";\r\n    setElements(tempElements);\r\n  };\r\n\r\n  const recursionFormObj = (tempElems, nodeId) => {\r\n    let obj = {\r\n      \"Fn::If\": [\r\n        tempElems.find(el => el.id === nodeId).data?.item\r\n          ? [tempElems.find(el => el.id === nodeId).data?.item]\r\n          : []\r\n      ]\r\n    };\r\n\r\n    tempElems = tempElems.filter(\r\n      el => el.target !== nodeId && el.id !== nodeId\r\n    );\r\n\r\n    // condition-yes-action\r\n    const yesNodeId = tempElems.find(\r\n      el => el.source === nodeId && el.label === \"yes\"\r\n    ).target;\r\n    if (tempElems.find(el => el.id === yesNodeId).data?.type === \"condition\") {\r\n      // recursion and return object to be pushed in to second array\r\n      obj[\"Fn::If\"].push([recursionFormObj(tempElems, nodeId)]);\r\n    } else {\r\n      obj[\"Fn::If\"].push(\r\n        tempElems.find(el => el.id === yesNodeId).data?.item || []\r\n      );\r\n    }\r\n    tempElems = tempElems.filter(\r\n      el => el.target !== yesNodeId && el.id !== yesNodeId\r\n    );\r\n\r\n    // condition-no-action\r\n    const noNodeId = tempElems.find(\r\n      el => el.source === nodeId && el.label === \"no\"\r\n    ).target;\r\n    if (tempElems.find(el => el.id === noNodeId).data?.type === \"condition\") {\r\n      // recursion and return object to be pushed in to third array\r\n      obj[\"Fn::If\"].push([recursionFormObj(tempElems, noNodeId)]);\r\n    } else {\r\n      obj[\"Fn::If\"].push(\r\n        tempElems.find(el => el.id === noNodeId).data?.item || []\r\n      );\r\n    }\r\n    tempElems = tempElems.filter(\r\n      el => el.target !== noNodeId && el.id !== noNodeId\r\n    );\r\n\r\n    return obj;\r\n  };\r\n\r\n  const handleSave = () => {\r\n    let tempElems = Object.assign([], elements);\r\n    const output = {\r\n      eventKey: \"\",\r\n      conditions: []\r\n    };\r\n\r\n    // Incomplete flow\r\n    if (\r\n      tempElems.filter(el => el.type === \"btnSelectorNode\" && !el.data.item)\r\n        .length\r\n    ) {\r\n      setModalState({\r\n        title: \"Warning\",\r\n        subtitle: \"Please complete the flow first before saving\",\r\n        btnLabel: \"OK\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    let i = 0;\r\n    while (tempElems.length > 0) {\r\n      let nodeId = tempElems[i].id;\r\n      if (tempElems[i].data?.type === \"event\") {\r\n        output.eventKey = tempElems[i].data?.item?.eventKey;\r\n        tempElems.splice(i, 1);\r\n      } else if (tempElems[i].data?.type === \"condition\") {\r\n        output.conditions.push(recursionFormObj(tempElems, nodeId));\r\n        break;\r\n      } else if (\r\n        tempElems.filter(el => el.type === \"btnSelectorNode\").length === 1 &&\r\n        tempElems[i].data?.type === \"action\"\r\n      ) {\r\n        output.conditions.push({\r\n          \"Fn::If\": [[{ noCondition: true }], tempElems[i].data?.item || [], []]\r\n        });\r\n        // Delete node and edge\r\n        tempElems = tempElems.filter(\r\n          el => el.id !== nodeId && el.target !== nodeId\r\n        );\r\n      } else if (tempElems[i].data?.type === \"choice\") {\r\n        return;\r\n      } else {\r\n        i++;\r\n      }\r\n    }\r\n\r\n    console.log(\"output\", output);\r\n  };\r\n\r\n  const recursionFromElement = (conditionObj, nodeId, position) => {\r\n    return [\r\n      initConditionNodeElement(\r\n        Object.values(conditionObj[0])[0],\r\n        nodeId,\r\n        position\r\n      ), // 2\r\n      initActionNodeElement(conditionObj[2], nodeId + 1, {\r\n        // 3\r\n        x: position.x,\r\n        y: position.y + 400\r\n      }),\r\n      ...(Object.keys(conditionObj[1][0])[0].includes(\"Fn::\")\r\n        ? recursionFromElement(\r\n            Object.values(conditionObj[1][0])[0],\r\n            nodeId + 2, // 4\r\n            {\r\n              x: position.x + 300,\r\n              y: position.y + 150\r\n            }\r\n          )\r\n        : [\r\n            initActionNodeElement(conditionObj[1], nodeId + 2, {\r\n              // 3\r\n              x: position.x + 300,\r\n              y: position.y + 150\r\n            })\r\n          ]),\r\n      initNodeEdge({\r\n        source: nodeId,\r\n        target: Number(nodeId) + 1,\r\n        label: \"yes\"\r\n      }),\r\n      initNodeEdge({\r\n        source: nodeId,\r\n        target: Number(nodeId) + 2,\r\n        label: \"no\"\r\n      })\r\n    ];\r\n  };\r\n\r\n  const handlePreview = () => {\r\n    let nodeId = 1;\r\n    let position = { x: 250, y: 200 };\r\n    let initialElements = [];\r\n    const sampleFlowConditions = Object.assign(\r\n      [],\r\n      SAMPLE_FLOW.conditions[0][\"Fn::If\"]\r\n    );\r\n\r\n    // Event\r\n    initialElements.push(\r\n      initEventNodeElement(\r\n        SAMPLE_EVENT_TRIGGERS.find(t => t.eventKey === SAMPLE_FLOW.eventKey)\r\n      )\r\n    );\r\n\r\n    // Condition + Action\r\n    let i = 0;\r\n    while (i < 3) {\r\n      nodeId += 1;\r\n      if (\r\n        Object.keys(sampleFlowConditions[i]).includes(\"Fn::\") ||\r\n        Object.keys(sampleFlowConditions[i].includes(\"conditionKey\"))\r\n      ) {\r\n        // Condition\r\n        initialElements = [\r\n          ...initialElements,\r\n          ...recursionFromElement(sampleFlowConditions, nodeId, position),\r\n          initNodeEdge({\r\n            source: \"1\",\r\n            target: \"2\"\r\n          })\r\n        ];\r\n        // i += 2 because both yes and no actions for the condition already pushed into array\r\n        // to complete / stop the loop\r\n        i += 2;\r\n      } else if (sampleFlowConditions[i + 1]) {\r\n        // Action\r\n        initialElements.push(\r\n          initActionNodeElement(sampleFlowConditions[i + 1], nodeId, {\r\n            x: 250,\r\n            y: 25\r\n          }),\r\n          initNodeEdge({\r\n            source: (Number(nodeId) - 1).toString(),\r\n            target: nodeId\r\n          })\r\n        );\r\n      }\r\n      i++;\r\n    }\r\n    setElements(initialElements);\r\n  };\r\n\r\n  // Handle lose focus on node to hide drawer\r\n  const handleOnSelectionChange = e => {\r\n    if (!e) {\r\n      setShowDrawer(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Background fullHeight color=\"HomePage grey100\">\r\n      {showDrawer && (\r\n        <div className=\"drawer\">\r\n          {showDrawer === \"events\" && (\r\n            <Events\r\n              selectedEventKey={elements[0].data?.item?.eventKey}\r\n              handleSelect={handleEventChange}\r\n            />\r\n          )}\r\n\r\n          {showDrawer === \"conditions\" && (\r\n            <Conditions\r\n              selectedEventKey={elements[0].data?.item?.eventKey}\r\n              selectedConditionObj={\r\n                elementsStateRef.current.find(\r\n                  el => el.id === selectedNodeStateRef.current\r\n                )?.data?.item || {}\r\n              }\r\n              handleSelect={handleConditionChange}\r\n            />\r\n          )}\r\n\r\n          {showDrawer === \"actions\" && (\r\n            <Actions\r\n              actionsArr={\r\n                elementsStateRef.current.find(\r\n                  el => el.id === selectedNodeStateRef.current\r\n                )?.data?.item || []\r\n              }\r\n              selectedActionObj={\r\n                (elementsStateRef.current.find(\r\n                  el => el.id === selectedNodeStateRef.current\r\n                )?.data?.item || [])[selectedActionIndex] || {}\r\n              }\r\n              unavailableActionKeys={unavailableActionKeys}\r\n              handleSelect={handleActionChange}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"home-section\">\r\n        <CardHeader\r\n          hasPreviewButton\r\n          handlePreview={handlePreview}\r\n          handleSave={handleSave}\r\n        >\r\n          <Typography variant=\"h3\">Map your automation</Typography>\r\n        </CardHeader>\r\n        <div className=\"flow-body\">\r\n          <ReactFlow\r\n            elementsSelectable={true}\r\n            elements={elements}\r\n            onElementsRemove={onElementsRemove}\r\n            onConnect={onConnect}\r\n            nodeTypes={nodeTypes}\r\n            // deleteKeyCode={46} /* 'delete'-key */\r\n            onSelectionChange={handleOnSelectionChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Background>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n"],"sourceRoot":""}