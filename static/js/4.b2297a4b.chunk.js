(this["webpackJsonpflow-frontend"]=this["webpackJsonpflow-frontend"]||[]).push([[4],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(18),i=n(39),c=(n(1),n(148)),o=n.n(c),l=n(184),d=n(183),r=n(2),s=(n(124),n(8)),u=function(e){var t=e.handleSave,n=e.hasPreviewButton,c=e.children,u=Object(i.a)(e,["handleSave","hasPreviewButton","children"]),b=Object(r.g)();return Object(s.jsxs)("div",Object(a.a)(Object(a.a)({className:"CardHeader"},u),{},{children:[Object(s.jsxs)("div",{className:"left-section",children:[c,Object(s.jsx)(d.a,{disableRipple:!0,children:Object(s.jsx)(o.a,{})})]}),Object(s.jsxs)("div",{className:"d-flex",children:[n&&Object(s.jsx)(l.a,{variant:"text",className:"btn-preview",onClick:function(){b.push({pathname:"/preview"})},children:"Go to Preview"}),t&&Object(s.jsx)(l.a,{variant:"contained",onClick:t,children:"Save"})]})]}))}},113:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return d}));var a=[{id:1,name:"New order placed"},{id:2,name:"New signup"},{id:3,name:"New subscriber"},{id:4,name:"New cancellation"}],i=[{id:1,name:"Amount > 100"},{id:2,name:"Amount < 100"},{id:3,name:"Product is Coffee"},{id:4,name:"Product is Tea"},{id:5,name:"Date > Today"},{id:6,name:"Date < Today"}],c=[{id:1,name:"Send email to Contact",type:"email",label:"Email address"},{id:2,name:"Call Contact",type:"tel",label:"Contact Number"},{id:3,name:"Add Tag to Contact",type:"tel",label:"Contact Number"},{id:4,name:"Remove Contact",type:"tel",label:"Contact Number"}],o=[{eventKey:"NewOrder",eventDisplay:"New order placed",fields:[{conditionKey:"ProductTitle",conditionDisplay:"Product Title",type:"string"},{conditionKey:"ProductAmount",conditionDisplay:"Product Amount",type:"int"}]},{eventKey:"NewSignup",eventDisplay:"New signup",fields:[{conditionKey:"Gender",conditionDisplay:"Customer Gender",type:"option",options:["Male","Female"]},{conditionKey:"DOB",conditionDisplay:"Birthday",type:"date"}]}],l=[{actionKey:"SendEmail",actionDisplay:"Send email to contact",fields:[{key:"emailAddress",placeHolder:"Email Address",type:"string"}]},{actionKey:"CallContact",actionDisplay:"Call contact",fields:[{key:"callContact",placeHolder:"Contact Number",type:"string"},{key:"callContactCountry",placeHolder:"Country",type:"selection",option:["Singapore","Malaysia"]}]}],d=[{name:"Equal",value:"=",type:"string"},{name:"Not equal",value:"!=",type:"string"},{name:"Contains",value:"contains",type:"string"},{name:"Not contains",value:"not contains",type:"string"},{name:"Greater than",value:">",type:"int"},{name:"Less than",value:"<",type:"int"},{name:"Greater and equal than",value:">=",type:"int"},{name:"Less and equal than",value:"<=",type:"int"},{name:"Equal",value:"=",type:"date"},{name:"Earlier than",value:"earlier than",type:"date"},{name:"Later than",value:"later than",type:"date"}]},124:function(e,t,n){},132:function(e,t,n){"use strict";var a=n(1),i=n.n(a),c=n(121),o=n(185),l=n(184),d=n(150),r=n.n(d),s=n(183),u=(n(133),n(8));t.a=Object(a.memo)((function(e){var t,n,a=e.id,d=e.data,b=e.isConnectable,j=Object(c.e)((function(e){return e.selectedElements}));return Object(u.jsxs)("div",{className:"ButtonSelectorNode ".concat(j&&j[0].id===a?"is-selected":""),onClick:function(){return d.focusNodeAction(a)},children:[Object(u.jsx)("div",{children:Object(u.jsx)(o.a,{variant:"body1",children:d.label})}),"event"===d.type&&(d.item?Object(u.jsx)(l.a,{variant:"contained",disabled:!0,className:"lbl-event",children:null===(t=d.item)||void 0===t?void 0:t.eventDisplay}):d.btnLabel&&Object(u.jsx)(l.a,{onClick:function(e){d.btnAction(a),e.stopPropagation()},variant:"contained",children:d.btnLabel})),("condition"===d.type||"choice"===d.type)&&(d.item?Object(u.jsx)(l.a,{variant:"contained",disabled:!0,className:"lbl-condition",children:Object.keys(d.item)[0].includes("Fn::")?Object.values(d.item)[0].map((function(e){return"".concat(e.conditionKey," ").concat(e.operator," ").concat(e.value.join(", "))})).join(" ".concat(Object.keys(d.item)[0].replace("Fn::","")," ")):"".concat(d.item.conditionKey," ").concat(d.item.operator," ").concat(d.item.value.join(", "))}):d.btnLabel&&Object(u.jsx)(l.a,{onClick:function(e){d.btnAction(a),e.stopPropagation()},variant:"contained",children:d.btnLabel})),d.type.includes("action")&&((null===(n=d.item)||void 0===n?void 0:n.length)?d.item.map((function(e,t){return Object(u.jsx)(i.a.Fragment,{children:Object(u.jsxs)("div",{className:"label-div",children:[Object(u.jsx)(l.a,{variant:"contained",onClick:function(e){d.handleSelectAction(a,t),e.stopPropagation()},className:"lbl-action",children:"Action: ".concat(e.actionKey,"\n                    ").concat(e.actionInputs.map((function(e){return"".concat(e.key," - ").concat(e.value)})).join(", "))}),Object(u.jsx)(s.a,{disableRipple:!0,onClick:function(e){d.handleDeleteAction(a,t),e.stopPropagation()},children:Object(u.jsx)(r.a,{})}),t!==d.item.length-1&&Object(u.jsx)(o.a,{variant:"h6",children:"AND"})]})},t)})):d.btnLabel&&Object(u.jsx)(l.a,{onClick:function(e){d.btnAction(a),e.stopPropagation()},variant:"contained",children:d.btnLabel})),"choice"===d.type&&Object(u.jsx)(o.a,{variant:"h6",className:"text-or",children:"OR"}),d.btnLabel2&&Object(u.jsx)(l.a,{onClick:function(e){d.btnAction2(a),e.stopPropagation()},variant:"contained",children:d.btnLabel2}),Object(u.jsx)(c.a,{type:"source",position:"bottom",style:{bottom:10,top:"auto",background:"#555"},isConnectable:b})]})}))},133:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},162:function(e,t,n){"use strict";var a=n(15),i=n(107);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=i(n(1)),o=(0,a(n(108)).default)(c.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.default=o},163:function(e,t,n){},164:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);var a=n(18),i=n(134),c=n(110),o=n(1),l=n.n(o),d=n(121),r=n(185),s=n(39),u=n(184),b=n(106),j=n(120),v=n.n(j),f=n(127),p=n.n(f),m=n(128),O=n.n(m),h=n(113),y=(n(159),n(8)),g=function(e){var t=e.handleSelect,n=e.selectedEventKey,i=Object(s.a)(e,["handleSelect","selectedEventKey"]),l=Object(o.useState)(!1),d=Object(c.a)(l,2),j=d[0],f=d[1];return Object(y.jsxs)("div",Object(a.a)(Object(a.a)({className:"Events"},i),{},{children:[Object(y.jsx)(b.a,{children:Object(y.jsx)(r.a,{variant:"h3",children:"Events"})}),Object(y.jsx)("div",Object(a.a)(Object(a.a)({className:"content-body ".concat(h.f.length>3?"has-show-more":""," ").concat(j?"show-all":"")},i),{},{children:h.f.map((function(e){return Object(y.jsx)(u.a,{onClick:function(){return t(e)},disableRipple:!0,variant:"text",className:"btn-card-item ".concat(n===e.eventKey?"on-focus":""),startIcon:Object(y.jsx)(v.a,{}),children:e.eventDisplay},e.eventKey)}))})),h.f.length>3&&Object(y.jsx)("div",{className:"btn-show-more",children:Object(y.jsxs)(u.a,{onClick:function(){return f(!j)},variant:"text",disableRipple:!0,endIcon:j?Object(y.jsx)(p.a,{}):Object(y.jsx)(O.a,{}),children:["Show ",j?"less":"more"]})})]}))},x=n(40),N=n(189),C=n(197),S=n(4),A=n(12),k=n(0),K=(n(3),n(30)),I=n(36),w=n(192),E=n(118),D=n(101),L=n(149),R=n(38),F="undefined"===typeof window?o.useEffect:o.useLayoutEffect,P=o.forwardRef((function(e,t){var n=e.alignItems,a=void 0===n?"center":n,i=e.autoFocus,c=void 0!==i&&i,l=e.button,d=void 0!==l&&l,r=e.children,s=e.classes,u=e.className,b=e.component,j=e.ContainerComponent,v=void 0===j?"li":j,f=e.ContainerProps,p=(f=void 0===f?{}:f).className,m=Object(S.a)(f,["className"]),O=e.dense,h=void 0!==O&&O,y=e.disabled,g=void 0!==y&&y,x=e.disableGutters,N=void 0!==x&&x,C=e.divider,A=void 0!==C&&C,I=e.focusVisibleClassName,P=e.selected,H=void 0!==P&&P,T=Object(S.a)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),G=o.useContext(L.a),B={dense:h||G.dense||!1,alignItems:a},M=o.useRef(null);F((function(){c&&M.current&&M.current.focus()}),[c]);var V=o.Children.toArray(r),q=V.length&&Object(E.a)(V[V.length-1],["ListItemSecondaryAction"]),W=o.useCallback((function(e){M.current=R.findDOMNode(e)}),[]),$=Object(D.a)(W,t),z=Object(k.a)({className:Object(K.a)(s.root,u,B.dense&&s.dense,!N&&s.gutters,A&&s.divider,g&&s.disabled,d&&s.button,"center"!==a&&s.alignItemsFlexStart,q&&s.secondaryAction,H&&s.selected),disabled:g},T),J=b||"li";return d&&(z.component=b||"div",z.focusVisibleClassName=Object(K.a)(s.focusVisible,I),J=w.a),q?(J=z.component||b?J:"div","li"===v&&("li"===J?J="div":"li"===z.component&&(z.component="div")),o.createElement(L.a.Provider,{value:B},o.createElement(v,Object(k.a)({className:Object(K.a)(s.container,p),ref:$},m),o.createElement(J,z,V),V.pop()))):o.createElement(L.a.Provider,{value:B},o.createElement(J,Object(k.a)({ref:$},z),V))})),H=Object(I.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(P),T=o.forwardRef((function(e,t){var n,a=e.classes,i=e.className,c=e.component,l=void 0===c?"li":c,d=e.disableGutters,r=void 0!==d&&d,s=e.ListItemClasses,u=e.role,b=void 0===u?"menuitem":u,j=e.selected,v=e.tabIndex,f=Object(S.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==v?v:-1),o.createElement(H,Object(k.a)({button:!0,role:b,tabIndex:n,component:l,selected:j,disableGutters:r,classes:Object(k.a)({dense:a.dense},s),className:Object(K.a)(a.root,i,j&&a.selected,!r&&a.gutters),ref:t},f))})),G=Object(I.a)((function(e){return{root:Object(k.a)({},e.typography.body1,Object(A.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(k.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(T),B=n(186),M=n(190),V=n(191),q=n(162),W=n.n(q),$=(n(160),function(e){var t=e.selectedEventKey,n=e.selectedConditionObj,d=e.handleSelect,j=Object(s.a)(e,["selectedEventKey","selectedConditionObj","handleSelect"]);Object(o.useEffect)((function(){var e,t;I((null===(e=Object.keys(n)[0])||void 0===e?void 0:e.includes("Fn::"))?Object.values(n)[0]:[{conditionKey:n.conditionKey||"",value:n.value||[],operator:n.operator||""}]),S((null===(t=Object.keys(n)[0])||void 0===t?void 0:t.includes("Fn::"))?Object.keys(n)[0]:"")}),[n]);var f={conditionKey:"",value:[],operator:""},p=h.f.find((function(e){return e.eventKey===t})).fields,m=Object(o.useState)(""),O=Object(c.a)(m,2),g=O[0],S=O[1],A=Object(o.useState)([{conditionKey:"",value:[],operator:""}]),k=Object(c.a)(A,2),K=k[0],I=k[1],w=function(e,t,n){var a=Object.assign([],K);"value"===n?a[t].value=e.split(","):a[t][n]=e,I(a)};return Object(y.jsxs)("div",Object(a.a)(Object(a.a)({className:"Conditions"},j),{},{children:[Object(y.jsx)(b.a,{children:Object(y.jsx)(r.a,{variant:"h3",children:"Conditions"})}),Object(y.jsxs)("div",Object(a.a)(Object(a.a)({className:"content-body"},j),{},{children:[K.length>1&&Object(y.jsxs)(B.a,{className:"mb-1-5",children:[Object(y.jsx)(C.a,{id:"label-must-meet",children:"All conditions must meet"}),Object(y.jsxs)(V.a,{labelId:"label-must-meet",id:"must-meet",value:g,onChange:function(e){return S(e.target.value)},children:[Object(y.jsx)(G,{value:"Fn::And",children:"AND"}),Object(y.jsx)(G,{value:"Fn::Or",children:"OR"})]})]}),K.map((function(e,t){var n,a;return Object(y.jsxs)(l.a.Fragment,{children:[0!==t&&Object(y.jsx)(u.a,{className:"btn-clear",variant:"text",startIcon:Object(y.jsx)(W.a,{}),disableRipple:!0,onClick:function(){return function(e){2===K.length&&S("");var t=Object.assign([],K);t.splice(e,1),I(t)}(t)},children:"Remove"}),Object(y.jsxs)(B.a,{children:[Object(y.jsxs)(C.a,{id:"label-condition-".concat(t),children:["Condition ",t+1]}),Object(y.jsx)(V.a,{labelId:"label-condition-".concat(t),id:"condition-".concat(t),value:e.conditionKey||"",onChange:function(e){return w(e.target.value,t,"conditionKey")},children:p.map((function(e){return Object(y.jsx)(G,{value:e.conditionKey,children:e.conditionDisplay},e.conditionKey)}))})]}),Object(y.jsxs)(B.a,{children:[Object(y.jsxs)(C.a,{id:"label-operator-".concat(t),children:["Operator ",t+1]}),Object(y.jsx)(V.a,{labelId:"label-operator-".concat(t),id:"operator-".concat(t),value:e.operator||"",onChange:function(e){return w(e.target.value,t,"operator")},children:"option"===(null===(n=p.find((function(t){return t.conditionKey===e.conditionKey})))||void 0===n?void 0:n.type)?p.find((function(t){return t.conditionKey===e.conditionKey})).options.map((function(e){return Object(y.jsx)(G,{value:e,children:e},e)})):null===(a=h.c.filter((function(t){var n;return t.type===(null===(n=p.find((function(t){return t.conditionKey===e.conditionKey})))||void 0===n?void 0:n.type)})))||void 0===a?void 0:a.map((function(e){return Object(y.jsx)(G,{value:e.value,children:e.name},e.value)}))})]}),Object(y.jsxs)(B.a,{children:[Object(y.jsx)(N.a,{fullWidth:!0,margin:"dense",onChange:function(e){return w(e.target.value,t,"value")},type:"text",value:e.value.join(",")||"",label:"Value ".concat(t+1)}),Object(y.jsx)(M.a,{children:"Please separate multiple values by comma"})]}),K.length-1!==t&&Object(y.jsx)(r.a,{variant:"h6",className:"must-meet-separator",children:"Fn::And"===g?"AND":"OR"})]},t)})),Object(y.jsx)(u.a,{variant:"text",startIcon:Object(y.jsx)(v.a,{}),disableRipple:!0,className:"btn-add",onClick:function(){g||S("Fn::And"),I([].concat(Object(i.a)(K),[f]))},children:"Add Condition"}),Object(y.jsx)(u.a,{variant:"contained",disableRipple:!0,onClick:function(){var e=g?Object(x.a)({},g,K):K[0];d(e)},children:"Save Condition"})]}))]}))}),z=(n(163),function(e){var t=e.handleSelect,n=(e.handleAddAction,e.actionsArr,e.selectedActionObj),i=Object(s.a)(e,["handleSelect","handleAddAction","actionsArr","selectedActionObj"]);Object(o.useEffect)((function(){Object.keys(n).length?m(l(n)):m({})}),[n]);var l=function(e){var t,n=Object.assign({},h.e.find((function(t){return t.actionKey===e.actionKey})));return null===(t=n.fields)||void 0===t||t.forEach((function(t){var n;t.value=null===(n=e.actionInputs.find((function(e){return e.key===t.key})))||void 0===n?void 0:n.value})),n},d=Object(o.useState)({}),j=Object(c.a)(d,2),f=j[0],m=j[1],g=Object(o.useState)(!1),x=Object(c.a)(g,2),S=x[0],A=x[1],k=function(e,t){var n=Object.assign({},f),a=f.fields.findIndex((function(e){return e.key===t.key}));n.fields[a].value=e.target.value,m(n)};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",Object(a.a)(Object(a.a)({className:"Actions"},i),{},{children:[Object(y.jsx)(b.a,{children:Object(y.jsx)(r.a,{variant:"h3",children:"Actions"})}),Object(y.jsx)("div",Object(a.a)(Object(a.a)({className:"content-body ".concat(h.e.length>3?"has-show-more":""," ").concat(S?"show-all":"")},i),{},{children:h.e.map((function(e){return Object(y.jsx)(u.a,{onClick:function(){m(e)},disableRipple:!0,variant:"text",className:"btn-card-item ".concat((null===f||void 0===f?void 0:f.actionKey)===e.actionKey?"on-focus":""),startIcon:Object(y.jsx)(v.a,{}),children:e.actionDisplay},e.actionKey)}))})),h.e.length>3&&Object(y.jsx)("div",{className:"btn-show-more",children:Object(y.jsxs)(u.a,{onClick:function(){return A(!S)},variant:"text",disableRipple:!0,endIcon:S?Object(y.jsx)(p.a,{}):Object(y.jsx)(O.a,{}),children:["Show ",S?"less":"more"]})})]})),Object.keys(f).length>0&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(b.a,{children:Object(y.jsx)(r.a,{variant:"h3",children:"Action Details"})}),Object(y.jsxs)("div",{className:"card-body",children:[f.fields.map((function(e){return"selection"===e.type?Object(y.jsxs)(B.a,{children:[Object(y.jsx)(C.a,{id:"label-".concat(e.key),children:e.placeHolder}),Object(y.jsx)(V.a,{labelId:"label-".concat(e.key),id:e.key,value:e.value||"",onChange:function(t){return k(t,e)},children:e.option.map((function(e){return Object(y.jsx)(G,{value:e,children:e},e)}))})]},e.key):Object(y.jsx)(N.a,{fullWidth:!0,margin:"dense",onChange:function(t){return k(t,e)},type:"text",value:e.value||"",label:e.placeHolder,placeholder:e.placeHolder},e.key)})),Object(y.jsx)(u.a,{variant:"text",disableRipple:!0,onClick:function(){var e={actionKey:f.actionKey,actionInputs:f.fields.map((function(e){return{key:e.key,value:e.value}}))};t(e,Object.keys(n).length?"update":"add")},children:Object.keys(n).length?"Update":"Add"})]})]})]})}),J=n(41),_=n(132),U=(n(164),{btnSelectorNode:_.a});t.default=function(){var e,t,n,l,s,u,j=Object(o.useState)({}),v=Object(c.a)(j,2),f=v[0],p=v[1],m=Object(o.useState)("events"),O=Object(c.a)(m,2),h=O[0],x=O[1],N=Object(o.useState)("1"),C=Object(c.a)(N,2),S=C[0],A=C[1],k=Object(o.useState)(null),K=Object(c.a)(k,2),I=K[0],w=K[1],E=[{id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",btnLabel:"Select event trigger",focusNodeAction:function(e){x("events"),A(e)},btnAction:function(e){x("events"),A(e)}},position:{x:250,y:25}}],D=Object(o.useState)(E),L=Object(c.a)(D,2),R=L[0],F=L[1],P=Object(o.useRef)();P.current=R;var H=Object(o.useRef)();H.current=S,Object(o.useRef)().current=I;var T=function e(t,n){return{label:"Next Step",type:"choice",btnLabel:"Add condition",focusNodeAction:function(e){x(null),A(e)},btnAction:function(a){var c;x("conditions"),A(a);var o=Object.assign([],P.current);(c=o=o.filter((function(e){return e.id!==t&&e.id!=="edges-".concat((Number(t)-1).toString(),"-").concat(t)}))).push.apply(c,[{id:t,type:"btnSelectorNode",data:{label:"If...",type:"condition",btnLabel:"Add condition",focusNodeAction:function(e){x("conditions"),A(e)},btnAction:function(e){x("conditions"),A(e)}},position:n},{id:(Number(t)+1).toString(),type:"btnSelectorNode",data:{label:"Then...",type:"action-yes",btnLabel:"Add action",focusNodeAction:function(e){x("actions"),w(null),A(e)},btnAction:function(e){x("actions"),A(e)},handleSelectAction:function(e,t){x("actions"),A(e),G(t)},handleDeleteAction:function(e,t){A(e),B(t)}},position:{x:n.x,y:n.y+400}},{id:(Number(t)+2).toString(),type:"btnSelectorNode",data:e((Number(t)+2).toString(),{x:n.x+300,y:n.y+150}),position:{x:n.x+300,y:n.y+150}}].concat(Object(i.a)("2"===t?[{id:"edges-".concat((Number(t)-1).toString(),"-").concat(t),source:(Number(t)-1).toString(),target:t,type:"smoothstep"}]:[]),[{id:"edges-".concat(t,"-").concat((Number(t)+1).toString()),source:t,target:(Number(t)+1).toString(),type:"smoothstep",label:"yes"},{id:"edges-".concat(t,"-").concat((Number(t)+2).toString()),source:t,target:(Number(t)+2).toString(),type:"smoothstep",label:"no"}])),F(o)},btnLabel2:"Add Action",btnAction2:function(e){var a;x("actions"),A(e);var c=Object.assign([],P.current);(a=c=c.filter((function(e){return e.id!==t&&e.id!=="edges-".concat((Number(t)-1).toString(),"-").concat(t)}))).push.apply(a,[{id:t,type:"btnSelectorNode",data:{label:"Then...",type:"action",btnLabel:"Add action",focusNodeAction:function(e){x("actions"),w(null),A(e)},btnAction:function(e){x("actions"),A(e)},handleSelectAction:function(e,t){x("actions"),A(e),G(t)},handleDeleteAction:function(e,t){A(e),B(t)}},position:n}].concat(Object(i.a)("2"===t?[{id:"edges-".concat((Number(t)-1).toString(),"-").concat(t),source:(Number(t)-1).toString(),target:t,type:"smoothstep"}]:[]))),F(c)}}},G=function(e){w(e)},B=function(e){var t,n,i,c=Object.assign([],P.current),o=c.findIndex((function(e){return e.id===H.current}));c[o]=Object(a.a)(Object(a.a)({},c[o]),{},{data:Object(a.a)(Object(a.a)({},null===(t=c[o])||void 0===t?void 0:t.data),{},{item:((null===(n=c[o])||void 0===n||null===(i=n.data)||void 0===i?void 0:i.item)||[]).filter((function(t,n){return n!==e}))})}),F(c),x(null)},M=function e(t,n){var a,i,c,o,l={"Fn::If":[[null===(a=t.find((function(e){return e.id===n})).data)||void 0===a?void 0:a.item]]},d=(t=t.filter((function(e){return e.target!==n&&e.id!==n}))).find((function(e){return e.source===n&&"yes"===e.label})).target;"condition"===(null===(i=t.find((function(e){return e.id===d})).data)||void 0===i?void 0:i.type)?l["Fn::If"].push([e(t,n)]):l["Fn::If"].push(null===(o=t.find((function(e){return e.id===d})).data)||void 0===o?void 0:o.item);var r,s=(t=t.filter((function(e){return e.target!==d&&e.id!==d}))).find((function(e){return e.source===n&&"no"===e.label})).target;"condition"===(null===(c=t.find((function(e){return e.id===s})).data)||void 0===c?void 0:c.type)?l["Fn::If"].push([e(t,s)]):l["Fn::If"].push(null===(r=t.find((function(e){return e.id===s})).data)||void 0===r?void 0:r.item);return t=t.filter((function(e){return e.target!==s&&e.id!==s})),l};return Object(y.jsxs)(J.a,{fullHeight:!0,color:"HomePage grey100",children:[h&&Object(y.jsxs)("div",{className:"drawer",children:["events"===h&&Object(y.jsx)(g,{selectedEventKey:f.eventKey,handleSelect:function(e){p(Object(a.a)(Object(a.a)({},f),{},{eventKey:e.eventKey}));var t=Object.assign([],P.current);t[0]={id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",item:e,focusNodeAction:function(e){x("events"),A(e)},btnAction:function(e){x("events"),A(e)}},position:{x:250,y:25}},1===t.length&&t.push({id:"2",type:"btnSelectorNode",data:T("2",{x:250,y:200}),position:{x:250,y:200}},{id:"edges-1-2",source:"1",target:"2",type:"smoothstep"}),x(null),F(t)}}),"conditions"===h&&Object(y.jsx)($,{selectedEventKey:f.eventKey,selectedConditionObj:(null===(e=P.current.find((function(e){return e.id===H.current})))||void 0===e||null===(t=e.data)||void 0===t?void 0:t.item)||{},handleSelect:function(e){var t,n=Object.assign([],P.current),i=n.findIndex((function(e){return e.id===H.current}));n[i]=Object(a.a)(Object(a.a)({},n[i]),{},{data:Object(a.a)(Object(a.a)({},null===(t=n[i])||void 0===t?void 0:t.data),{},{item:e})}),F(n)}}),"actions"===h&&Object(y.jsx)(z,{actionsArr:(null===(n=P.current.find((function(e){return e.id===H.current})))||void 0===n||null===(l=n.data)||void 0===l?void 0:l.item)||[],selectedActionObj:((null===(s=P.current.find((function(e){return e.id===H.current})))||void 0===s||null===(u=s.data)||void 0===u?void 0:u.item)||[])[I]||{},handleSelect:function(e,t){var n,c,o,l,d,r,s,u=Object.assign([],P.current),b=u.findIndex((function(e){return e.id===H.current}));u[b]=Object(a.a)(Object(a.a)({},u[b]),{},{data:Object(a.a)(Object(a.a)({},null===(n=u[b])||void 0===n?void 0:n.data),{},{item:"update"===t?[].concat(Object(i.a)(null===(c=u[b])||void 0===c||null===(o=c.data)||void 0===o?void 0:o.item.slice(0,I)),[e],Object(i.a)(null===(l=u[b])||void 0===l||null===(d=l.data)||void 0===d?void 0:d.item.slice(I+1))):[].concat(Object(i.a)((null===(r=u[b])||void 0===r||null===(s=r.data)||void 0===s?void 0:s.item)||[]),[e])})}),F(u)}})]}),Object(y.jsxs)("div",{className:"home-section",children:[Object(y.jsx)(b.a,{handleSave:function(){for(var e=Object.assign([],R),t={eventKey:"",conditions:[]},n=0,a=function(){var a,i,c,o=e[n].id;if("event"===(null===(a=e[n].data)||void 0===a?void 0:a.type)){var l,d;t.eventKey=null===(l=e[n].data)||void 0===l||null===(d=l.item)||void 0===d?void 0:d.eventKey,e.splice(n,1)}else{if("condition"===(null===(i=e[n].data)||void 0===i?void 0:i.type))return t.conditions.push(M(e,o)),"break";var r;1===e.filter((function(e){return"btnSelectorNode"===e.type})).length&&"action"===(null===(c=e[n].data)||void 0===c?void 0:c.type)?(t.conditions.push({"Fn::If":[[{noCondition:!0}],null===(r=e[n].data)||void 0===r?void 0:r.item,[]]}),e=e.filter((function(e){return e.id!==o&&e.target!==o}))):n++}};e.length>0;){if("break"===a())break}console.log("output",t)},children:Object(y.jsx)(r.a,{variant:"h3",children:"Map your automation"})}),Object(y.jsx)("div",{className:"flow-body",children:Object(y.jsx)(d.c,{elementsSelectable:!0,elements:R,onElementsRemove:function(e){return F((function(t){return Object(d.d)(e,t)}))},onConnect:function(e){return F((function(t){return Object(d.b)(e,t)}))},nodeTypes:U,onSelectionChange:function(e){e||x(null)}})})]})]})}}}]);
//# sourceMappingURL=4.b2297a4b.chunk.js.map