(this["webpackJsonpflow-frontend"]=this["webpackJsonpflow-frontend"]||[]).push([[4],{136:function(e,t,n){},139:function(e,t,n){},143:function(e,t,n){},145:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var c=n(40),a=n(18),i=n(147),o=n(126),d=n(1),r=n.n(d),s=n(127),l=n(169),b=n(170),u=n(171),j=n(41),O=n(42),f=n(137),h=n.n(f),v=n(168),m=(n(136),n(8)),p=function(e){var t=e.handleSave,n=e.children,c=Object(O.a)(e,["handleSave","children"]);return Object(m.jsxs)("div",Object(a.a)(Object(a.a)({className:"CardHeader"},c),{},{children:[Object(m.jsxs)("div",{className:"left-section",children:[n,Object(m.jsx)(v.a,{disableRipple:!0,children:Object(m.jsx)(h.a,{})})]}),t&&Object(m.jsx)(l.a,{variant:"contained",onClick:t,children:"Save"})]}))},x=n(140),g=n.n(x),y=n(141),N=n.n(y),S=n(142),A=n.n(S),C=(n(139),function(e){var t=Object(d.useState)(!1),n=Object(o.a)(t,2),c=n[0],i=n[1],r=e.type,s=e.listItems,b=e.nodeId,u=e.selectedId,j=e.onFocusId,f=e.handleSelect,h=Object(O.a)(e,["type","listItems","nodeId","selectedId","onFocusId","handleSelect"]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",Object(a.a)(Object(a.a)({className:"CardBody ".concat(s.length>3?"has-show-more":""," ").concat(c?"show-all":"")},h),{},{children:("actions"===r||"conditions"===r?s.filter((function(e){var t;return!(null===(t=u[b])||void 0===t?void 0:t.includes(e.id))})):s.filter((function(e){return!u.includes(e.id)}))).map((function(e){return Object(m.jsx)(l.a,{onClick:function(){return f(e.id)},disableRipple:!0,variant:"text",className:"btn-card-item ".concat(j===e.id?"on-focus":""),startIcon:Object(m.jsx)(g.a,{}),children:e.name},e.id)}))})),s.length>3&&Object(m.jsx)("div",{className:"btn-show-more",children:Object(m.jsxs)(l.a,{onClick:function(){return i(!c)},variant:"text",disableRipple:!0,endIcon:c?Object(m.jsx)(N.a,{}):Object(m.jsx)(A.a,{}),children:["Show ",c?"less":"more"]})})]})}),I=n(144),k=n.n(I),w=(n(143),Object(d.memo)((function(e){var t,n,c=e.id,a=e.data,i=e.isConnectable,o=Object(s.e)((function(e){return e.selectedElements}));return Object(m.jsxs)("div",{className:"ButtonSelectorNode ".concat(o&&o[0].id===c?"is-selected":""),onClick:function(){return a.focusNodeAction()},children:[Object(m.jsx)("div",{children:Object(m.jsx)(b.a,{variant:"body1",children:a.label})}),"event"===a.type&&(a.event?Object(m.jsx)(l.a,{variant:"contained",disabled:!0,className:"lbl-event",children:a.event.name}):a.btnLabel&&Object(m.jsx)(l.a,{onClick:function(e){a.btnAction(),e.stopPropagation()},variant:"contained",children:a.btnLabel})),("condition"===a.type||"choice"===a.type)&&((null===(t=a.conditions)||void 0===t?void 0:t.length)>0?a.conditions.map((function(e,t){return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsxs)("div",{className:"label-div",children:[Object(m.jsx)(l.a,{variant:"contained",disabled:!0,className:"lbl-condition",children:e.name}),Object(m.jsx)(v.a,{disableRipple:!0,onClick:function(){return a.handleDeleteCondition(e.id)},children:Object(m.jsx)(k.a,{})}),t!==a.conditions.length-1&&Object(m.jsx)(b.a,{variant:"h6",children:"AND"})]})},e.id)})):a.btnLabel&&Object(m.jsx)(l.a,{onClick:function(e){a.btnAction(),e.stopPropagation()},variant:"contained",children:a.btnLabel})),a.type.includes("action")&&((null===(n=a.actions)||void 0===n?void 0:n.length)>0?a.actions.map((function(e,t){return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsxs)("div",{className:"label-div",children:[Object(m.jsxs)(l.a,{variant:"contained",disabled:!0,className:"lbl-action",children:[e.name," - ",e.value]}),Object(m.jsx)(v.a,{disableRipple:!0,onClick:function(){return a.handleDeleteAction(e.id)},children:Object(m.jsx)(k.a,{})}),t!==a.actions.length-1&&Object(m.jsx)(b.a,{variant:"h6",children:"AND"})]})},e.id)})):a.btnLabel&&Object(m.jsx)(l.a,{onClick:function(e){a.btnAction(),e.stopPropagation()},variant:"contained",children:a.btnLabel})),"choice"===a.type&&Object(m.jsx)(b.a,{variant:"h6",className:"text-or",children:"OR"}),a.btnLabel2&&Object(m.jsx)(l.a,{onClick:function(e){a.btnAction2(),e.stopPropagation()},variant:"contained",children:a.btnLabel2}),Object(m.jsx)(s.a,{type:"source",position:"bottom",style:{bottom:10,top:"auto",background:"#555"},isConnectable:i})]})}))),L=[{id:1,name:"New order placed"},{id:2,name:"New signup"},{id:3,name:"New subscriber"},{id:4,name:"New cancellation"}],R=[{id:1,name:"Amount > 100"},{id:2,name:"Amount < 100"},{id:3,name:"Product is Coffee"},{id:4,name:"Product is Tea"},{id:5,name:"Date > Today"},{id:6,name:"Date < Today"}],D=[{id:1,name:"Send email to Contact",type:"email",label:"Email address"},{id:2,name:"Call Contact",type:"tel",label:"Contact Number"},{id:3,name:"Add Tag to Contact",type:"tel",label:"Contact Number"},{id:4,name:"Remove Contact",type:"tel",label:"Contact Number"}],F=(n(145),{btnSelectorNode:w});t.default=function(){var e=Object(d.useState)("events"),t=Object(o.a)(e,2),n=t[0],r=t[1],O=Object(d.useState)("1"),f=Object(o.a)(O,2),h=f[0],v=f[1],x=Object(d.useState)([]),g=Object(o.a)(x,2),y=g[0],N=g[1],S=Object(d.useState)({}),A=Object(o.a)(S,2),I=A[0],k=A[1],w=Object(d.useState)({}),P=Object(o.a)(w,2),T=P[0],E=P[1],H=Object(d.useState)(null),W=Object(o.a)(H,2),B=W[0],J=W[1],K=[{id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",btnLabel:"Select event trigger",focusNodeAction:function(){r("events"),v("1")},btnAction:function(){r("events"),v("1")}},position:{x:250,y:25}}],M=Object(d.useState)(K),q=Object(o.a)(M,2),z=q[0],G=q[1],Q=Object(d.useRef)();Q.current=z;var U=Object(d.useRef)();U.current=h;var V=Object(d.useRef)();V.current=I;var X=Object(d.useRef)();X.current=T;var Y=function e(t,n){return{label:"Next Step",type:"choice",btnLabel:"Add condition",focusNodeAction:function(){r(null),v(t)},btnAction:function(){var c;r("conditions"),v(t);var a=Object.assign([],Q.current);(c=a=a.filter((function(e){return e.id!==t&&e.id!=="edges-".concat((Number(t)-1).toString(),"-").concat(t)}))).push.apply(c,[{id:t,type:"btnSelectorNode",data:{label:"If...",type:"condition",btnLabel:"Add condition",focusNodeAction:function(){r("conditions"),v(t)},btnAction:function(){r("conditions"),v(t)},handleDeleteCondition:function(e){return Z(t,e)}},position:n},{id:(Number(t)+1).toString(),type:"btnSelectorNode",data:{label:"Then...",type:"action-yes",btnLabel:"Add action",focusNodeAction:function(){r("actions"),v((Number(t)+1).toString())},btnAction:function(){r("actions"),v((Number(t)+1).toString())},handleDeleteAction:function(e){return $((Number(t)+1).toString(),e)}},position:{x:n.x,y:n.y+400}},{id:(Number(t)+2).toString(),type:"btnSelectorNode",data:e((Number(t)+2).toString(),{x:n.x+300,y:n.y+150}),position:{x:n.x+300,y:n.y+150}}].concat(Object(i.a)("2"===t?[{id:"edges-".concat((Number(t)-1).toString(),"-").concat(t),source:(Number(t)-1).toString(),target:t,type:"smoothstep"}]:[]),[{id:"edges-".concat(t,"-").concat((Number(t)+1).toString()),source:t,target:(Number(t)+1).toString(),type:"smoothstep",label:"yes"},{id:"edges-".concat(t,"-").concat((Number(t)+2).toString()),source:t,target:(Number(t)+2).toString(),type:"smoothstep",label:"no"}])),G(a)},btnLabel2:"Add Action",btnAction2:function(){var e;r("actions"),v(t);var c=Object.assign([],Q.current);(e=c=c.filter((function(e){return e.id!==t&&e.id!=="edges-".concat((Number(t)-1).toString(),"-").concat(t)}))).push.apply(e,[{id:t,type:"btnSelectorNode",data:{label:"Then...",type:"action",btnLabel:"Add action",focusNodeAction:function(){r("actions"),v(t)},btnAction:function(){r("actions"),v(t)},handleDeleteAction:function(e){return $(t,e)}},position:n}].concat(Object(i.a)("2"===t?[{id:"edges-".concat((Number(t)-1).toString(),"-").concat(t),source:(Number(t)-1).toString(),target:t,type:"smoothstep"}]:[]))),G(c)},handleDeleteCondition:function(e){return Z(t,e)}}},Z=function(e,t){var n,i=Object.assign([],Q.current),o=i.findIndex((function(t){return t.id===e}));i[o]=Object(a.a)(Object(a.a)({},i[o]),{},{data:Object(a.a)(Object(a.a)({},i[o].data),{},{conditions:((null===(n=i[o].data)||void 0===n?void 0:n.conditions)||[]).filter((function(e){return e.id!==t}))})}),k(Object(a.a)(Object(a.a)({},V.current),{},Object(c.a)({},U.current,(V.current[U.current]||[]).filter((function(e){return e!==t}))))),G(i)},$=function(e,t){var n,i=Object.assign([],Q.current),o=i.findIndex((function(t){return t.id===e}));i[o]=Object(a.a)(Object(a.a)({},i[o]),{},{data:Object(a.a)(Object(a.a)({},i[o].data),{},{actions:((null===(n=i[o].data)||void 0===n?void 0:n.actions)||[]).filter((function(e){return e.id!==t}))})}),E(Object(a.a)(Object(a.a)({},X.current),{},Object(c.a)({},U.current,(X.current[U.current]||[]).filter((function(e){return e!==t}))))),G(i)};return Object(m.jsxs)(j.a,{fullHeight:!0,color:"HomePage grey100",children:[n&&Object(m.jsxs)("div",{className:"drawer",children:["events"===n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{children:Object(m.jsx)(b.a,{variant:"h3",children:"Events"})}),Object(m.jsx)(C,{type:"events",nodeId:h,listItems:L,selectedId:y,handleSelect:function(e){N([e]);var t=Object.assign([],z);t[0]={id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",event:L.find((function(t){return t.id===e})),focusNodeAction:function(){r("events"),v("1")},btnAction:function(){r("events"),v("1")}},position:{x:250,y:25}},1===t.length&&t.push({id:"2",type:"btnSelectorNode",data:Y("2",{x:250,y:200}),position:{x:250,y:200}},{id:"edges-1-2",source:"1",target:"2",type:"smoothstep"}),r(null),G(t)}})]}),"conditions"===n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{children:Object(m.jsx)(b.a,{variant:"h3",children:"Conditions"})}),Object(m.jsx)(C,{type:"conditions",nodeId:h,listItems:R,selectedId:I,handleSelect:function(e){var t;k((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(c.a)({},h,[].concat(Object(i.a)(I[h]||[]),[e])))}));var n=Object.assign([],z),o=n.findIndex((function(e){return e.id===h}));n[o]=Object(a.a)(Object(a.a)({},n[o]),{},{data:Object(a.a)(Object(a.a)({},n[o].data),{},{conditions:[].concat(Object(i.a)((null===(t=n[o].data)||void 0===t?void 0:t.conditions)||[]),[R.find((function(t){return t.id===e}))])})}),G(n)}})]}),"actions"===n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{children:Object(m.jsx)(b.a,{variant:"h3",children:"Actions"})}),Object(m.jsx)(C,{type:"actions",nodeId:h,listItems:D,selectedId:T,onFocusId:null===B||void 0===B?void 0:B.id,handleSelect:function(e){J(D.find((function(t){return t.id===e})))}}),B&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{children:Object(m.jsx)(b.a,{variant:"h3",children:"Action Details"})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(u.a,{fullWidth:!0,margin:"dense",onChange:function(e){return J((function(t){return Object(a.a)(Object(a.a)({},t),{},{value:e.target.value})}))},type:B.type,value:B.value||"",label:B.label}),Object(m.jsx)(l.a,{variatn:"text",disableRipple:!0,onClick:function(){var e;E((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(c.a)({},h,[].concat(Object(i.a)(T[h]||[]),[B.id])))}));var t=Object.assign([],z),n=t.findIndex((function(e){return e.id===h}));t[n]=Object(a.a)(Object(a.a)({},t[n]),{},{data:Object(a.a)(Object(a.a)({},t[n].data),{},{actions:[].concat(Object(i.a)((null===(e=t[n].data)||void 0===e?void 0:e.actions)||[]),[B])})}),G(t)},children:"Add"})]})]})]})]}),Object(m.jsxs)("div",{className:"home-section",children:[Object(m.jsx)(p,{handleSave:function(){var e=z.filter((function(e){return"btnSelectorNode"===e.type})),t=[];e.forEach((function(e){switch(e.data.type){case"event":t.push({event:e.data.event});break;case"condition":t.push({condition:e.data.conditions});break;case"action-yes":case"action":t.push(Object(c.a)({},e.data.type,Object(i.a)(e.data.actions)))}})),console.log("output",t)},children:Object(m.jsx)(b.a,{variant:"h3",children:"Map your automation"})}),Object(m.jsx)("div",{className:"flow-body",children:Object(m.jsx)(s.c,{elementsSelectable:!0,elements:z,onElementsRemove:function(e){return G((function(t){return Object(s.d)(e,t)}))},onConnect:function(e){return G((function(t){return Object(s.b)(e,t)}))},nodeTypes:F,deleteKeyCode:46})})]})]})}}}]);
//# sourceMappingURL=4.15f82dbb.chunk.js.map