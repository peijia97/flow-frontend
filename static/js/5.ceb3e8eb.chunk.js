(this["webpackJsonpflow-frontend"]=this["webpackJsonpflow-frontend"]||[]).push([[5],{118:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var c=n(18),i=n(39),a=(n(1),n(137)),o=n.n(a),r=n(175),d=n(174),s=n(2),l=(n(119),n(8)),b=function(t){var e=t.handleSave,n=t.hasPreviewButton,a=t.children,b=Object(i.a)(t,["handleSave","hasPreviewButton","children"]),u=Object(s.g)();return Object(l.jsxs)("div",Object(c.a)(Object(c.a)({className:"CardHeader"},b),{},{children:[Object(l.jsxs)("div",{className:"left-section",children:[a,Object(l.jsx)(d.a,{disableRipple:!0,children:Object(l.jsx)(o.a,{})})]}),Object(l.jsxs)("div",{className:"d-flex",children:[n&&Object(l.jsx)(r.a,{variant:"text",className:"btn-preview",onClick:function(){u.push({pathname:"/preview"})},children:"Go to Preview"}),e&&Object(l.jsx)(r.a,{variant:"contained",onClick:e,children:"Save"})]})]}))}},119:function(t,e,n){},123:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var c=n(18),i=n(39),a=n(113),o=n(1),r=n(175),d=n(138),s=n.n(d),l=n(139),b=n.n(l),u=n(140),j=n.n(u),O=(n(124),n(8)),f=function(t){var e=Object(o.useState)(!1),n=Object(a.a)(e,2),d=n[0],l=n[1],u=t.type,f=t.listItems,h=t.nodeId,p=t.selectedId,v=t.onFocusId,m=t.handleSelect,g=Object(i.a)(t,["type","listItems","nodeId","selectedId","onFocusId","handleSelect"]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",Object(c.a)(Object(c.a)({className:"CardBody ".concat(f.length>3?"has-show-more":""," ").concat(d?"show-all":"")},g),{},{children:("actions"===u||"conditions"===u?f.filter((function(t){var e;return!(null===(e=p[h])||void 0===e?void 0:e.includes(t.id))})):f.filter((function(t){return!p.includes(t.id)}))).map((function(t){return Object(O.jsx)(r.a,{onClick:function(){return m(t.id)},disableRipple:!0,variant:"text",className:"btn-card-item ".concat(v===t.id?"on-focus":""),startIcon:Object(O.jsx)(s.a,{}),children:t.name},t.id)}))})),f.length>3&&Object(O.jsx)("div",{className:"btn-show-more",children:Object(O.jsxs)(r.a,{onClick:function(){return l(!d)},variant:"text",disableRipple:!0,endIcon:d?Object(O.jsx)(b.a,{}):Object(O.jsx)(j.a,{}),children:["Show ",d?"less":"more"]})})]})}},124:function(t,e,n){},125:function(t,e,n){"use strict";var c=n(1),i=n.n(c),a=n(114),o=n(176),r=n(175),d=n(141),s=n.n(d),l=n(174),b=(n(126),n(8));e.a=Object(c.memo)((function(t){var e,n,c=t.id,d=t.data,u=t.isConnectable,j=Object(a.e)((function(t){return t.selectedElements}));return Object(b.jsxs)("div",{className:"ButtonSelectorNode ".concat(j&&j[0].id===c?"is-selected":""),onClick:function(){return d.focusNodeAction()},children:[Object(b.jsx)("div",{children:Object(b.jsx)(o.a,{variant:"body1",children:d.label})}),"event"===d.type&&(d.event?Object(b.jsx)(r.a,{variant:"contained",disabled:!0,className:"lbl-event",children:d.event.name}):d.btnLabel&&Object(b.jsx)(r.a,{onClick:function(t){d.btnAction(),t.stopPropagation()},variant:"contained",children:d.btnLabel})),("condition"===d.type||"choice"===d.type)&&((null===(e=d.conditions)||void 0===e?void 0:e.length)>0?d.conditions.map((function(t,e){return Object(b.jsx)(i.a.Fragment,{children:Object(b.jsxs)("div",{className:"label-div",children:[Object(b.jsx)(r.a,{variant:"contained",disabled:!0,className:"lbl-condition",children:t.name}),Object(b.jsx)(l.a,{disableRipple:!0,onClick:function(){return d.handleDeleteCondition(t.id)},children:Object(b.jsx)(s.a,{})}),e!==d.conditions.length-1&&Object(b.jsx)(o.a,{variant:"h6",children:"AND"})]})},t.id)})):d.btnLabel&&Object(b.jsx)(r.a,{onClick:function(t){d.btnAction(),t.stopPropagation()},variant:"contained",children:d.btnLabel})),d.type.includes("action")&&((null===(n=d.actions)||void 0===n?void 0:n.length)>0?d.actions.map((function(t,e){return Object(b.jsx)(i.a.Fragment,{children:Object(b.jsxs)("div",{className:"label-div",children:[Object(b.jsxs)(r.a,{variant:"contained",disabled:!0,className:"lbl-action",children:[t.name," - ",t.value]}),Object(b.jsx)(l.a,{disableRipple:!0,onClick:function(){return d.handleDeleteAction(t.id)},children:Object(b.jsx)(s.a,{})}),e!==d.actions.length-1&&Object(b.jsx)(o.a,{variant:"h6",children:"AND"})]})},t.id)})):d.btnLabel&&Object(b.jsx)(r.a,{onClick:function(t){d.btnAction(),t.stopPropagation()},variant:"contained",children:d.btnLabel})),"choice"===d.type&&Object(b.jsx)(o.a,{variant:"h6",className:"text-or",children:"OR"}),d.btnLabel2&&Object(b.jsx)(r.a,{onClick:function(t){d.btnAction2(),t.stopPropagation()},variant:"contained",children:d.btnLabel2}),Object(b.jsx)(a.a,{type:"source",position:"bottom",style:{bottom:10,top:"auto",background:"#555"},isConnectable:u})]})}))},126:function(t,e,n){},127:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var c=[{id:1,name:"New order placed"},{id:2,name:"New signup"},{id:3,name:"New subscriber"},{id:4,name:"New cancellation"}],i=[{id:1,name:"Amount > 100"},{id:2,name:"Amount < 100"},{id:3,name:"Product is Coffee"},{id:4,name:"Product is Tea"},{id:5,name:"Date > Today"},{id:6,name:"Date < Today"}],a=[{id:1,name:"Send email to Contact",type:"email",label:"Email address"},{id:2,name:"Call Contact",type:"tel",label:"Contact Number"},{id:3,name:"Add Tag to Contact",type:"tel",label:"Contact Number"},{id:4,name:"Remove Contact",type:"tel",label:"Contact Number"}]},153:function(t,e,n){},177:function(t,e,n){"use strict";n.r(e);var c=n(40),i=n(142),a=n(18),o=n(113),r=n(1),d=n(114),s=n(175),l=n(176),b=n(178),u=n(41),j=n(118),O=n(123),f=n(125),h=n(127),p=(n(153),n(8)),v={btnSelectorNode:f.a};e.default=function(){var t=Object(r.useState)("events"),e=Object(o.a)(t,2),n=e[0],f=e[1],m=Object(r.useState)("1"),g=Object(o.a)(m,2),x=g[0],y=g[1],S=Object(r.useState)([]),N=Object(o.a)(S,2),A=N[0],C=N[1],I=Object(r.useState)({}),w=Object(o.a)(I,2),k=w[0],L=w[1],D=Object(r.useState)({}),R=Object(o.a)(D,2),P=R[0],F=R[1],T=Object(r.useState)(null),E=Object(o.a)(T,2),B=E[0],W=E[1],H=[{event:{id:1,name:"New order placed"}},{conditions:[{id:1,name:"Amount > 100"}]},{"action-yes":[{id:2,label:"Call Contact",name:"Call Contact",type:"tel",value:"888"}]},{action:[{id:2,label:"Contact Number",name:"Call Contact",type:"tel",value:"999"}]}],J=Object(r.useState)(function(){var t=[],e=1,n={x:250,y:25};return H.forEach((function(c){switch(Object.keys(c)[0]){case"event":t.push({id:e.toString(),type:"btnSelectorNode",data:Object(a.a)({label:"When",type:"event",btnLabel:"Select event trigger",focusNodeAction:function(){f("events"),y(e.toString())},btnAction:function(){f("events"),y(e.toString())}},c),position:n},{id:"edges-".concat(e.toString(),"-").concat(e+1),source:e.toString(),target:(Number(e)+1).toString(),type:"smoothstep"});break;case"conditions":n={x:n.x,y:n.y+175},++e,t.push({id:e.toString(),type:"btnSelectorNode",data:Object(a.a)({label:"If...",type:"condition",btnLabel:"Add condition",focusNodeAction:function(){f("conditions"),y(e.toString())},btnAction:function(){f("conditions"),y(e.toString())},handleDeleteCondition:function(t){return X(e,t)}},c),position:n},{id:"edges-".concat(e.toString(),"-").concat(e+1),source:e.toString(),target:(Number(e)+1).toString(),type:"smoothstep",label:"yes"},{id:"edges-".concat(e.toString(),"-").concat(e+2),source:e.toString(),target:(Number(e)+2).toString(),type:"smoothstep",label:"no"});break;case"action-yes":n={x:n.x,y:n.y+400},++e,t.push({id:e.toString(),type:"btnSelectorNode",data:{label:"Then...",type:"action-yes",btnLabel:"Add action",focusNodeAction:function(){f("actions"),y(e.toString())},btnAction:function(){f("actions"),y(e.toString())},handleDeleteCondition:function(t){return X(e,t)},actions:c["action-yes"]},position:n});break;case"action":n={x:n.x+300,y:n.y},++e,t.push({id:e.toString(),type:"btnSelectorNode",data:{label:"Then...",type:"action",btnLabel:"Add action",focusNodeAction:function(){f("actions"),y(e.toString())},btnAction:function(){f("actions"),y(e.toString())},handleDeleteCondition:function(t){return X(e,t)},actions:c.action},position:n})}})),t}()),G=Object(o.a)(J,2),K=G[0],M=G[1],q=Object(r.useRef)();q.current=K;var z=Object(r.useRef)();z.current=x;var Q=Object(r.useRef)();Q.current=k;var U=Object(r.useRef)();U.current=P;var V=function t(e,n){return{label:"Next Step",type:"choice",btnLabel:"Add condition",focusNodeAction:function(){f(null),y(e)},btnAction:function(){var c;f("conditions"),y(e);var a=Object.assign([],q.current);(c=a=a.filter((function(t){return t.id!==e&&t.id!=="edges-".concat((Number(e)-1).toString(),"-").concat(e)}))).push.apply(c,[{id:e,type:"btnSelectorNode",data:{label:"If...",type:"condition",btnLabel:"Add condition",focusNodeAction:function(){f("conditions"),y(e)},btnAction:function(){f("conditions"),y(e)},handleDeleteCondition:function(t){return X(e,t)}},position:n},{id:(Number(e)+1).toString(),type:"btnSelectorNode",data:{label:"Then...",type:"action-yes",btnLabel:"Add action",focusNodeAction:function(){f("actions"),y((Number(e)+1).toString())},btnAction:function(){f("actions"),y((Number(e)+1).toString())},handleDeleteAction:function(t){return Y((Number(e)+1).toString(),t)}},position:{x:n.x,y:n.y+400}},{id:(Number(e)+2).toString(),type:"btnSelectorNode",data:t((Number(e)+2).toString(),{x:n.x+300,y:n.y+150}),position:{x:n.x+300,y:n.y+150}}].concat(Object(i.a)("2"===e?[{id:"edges-".concat((Number(e)-1).toString(),"-").concat(e),source:(Number(e)-1).toString(),target:e,type:"smoothstep"}]:[]),[{id:"edges-".concat(e,"-").concat((Number(e)+1).toString()),source:e,target:(Number(e)+1).toString(),type:"smoothstep",label:"yes"},{id:"edges-".concat(e,"-").concat((Number(e)+2).toString()),source:e,target:(Number(e)+2).toString(),type:"smoothstep",label:"no"}])),M(a)},btnLabel2:"Add Action",btnAction2:function(){var t;f("actions"),y(e);var c=Object.assign([],q.current);(t=c=c.filter((function(t){return t.id!==e&&t.id!=="edges-".concat((Number(e)-1).toString(),"-").concat(e)}))).push.apply(t,[{id:e,type:"btnSelectorNode",data:{label:"Then...",type:"action",btnLabel:"Add action",focusNodeAction:function(){f("actions"),y(e)},btnAction:function(){f("actions"),y(e)},handleDeleteAction:function(t){return Y(e,t)}},position:n}].concat(Object(i.a)("2"===e?[{id:"edges-".concat((Number(e)-1).toString(),"-").concat(e),source:(Number(e)-1).toString(),target:e,type:"smoothstep"}]:[]))),M(c)},handleDeleteCondition:function(t){return X(e,t)}}},X=function(t,e){var n,i=Object.assign([],q.current),o=i.findIndex((function(e){return e.id===t}));i[o]=Object(a.a)(Object(a.a)({},i[o]),{},{data:Object(a.a)(Object(a.a)({},i[o].data),{},{conditions:((null===(n=i[o].data)||void 0===n?void 0:n.conditions)||[]).filter((function(t){return t.id!==e}))})}),L(Object(a.a)(Object(a.a)({},Q.current),{},Object(c.a)({},z.current,(Q.current[z.current]||[]).filter((function(t){return t!==e}))))),M(i)},Y=function(t,e){var n,i=Object.assign([],q.current),o=i.findIndex((function(e){return e.id===t}));i[o]=Object(a.a)(Object(a.a)({},i[o]),{},{data:Object(a.a)(Object(a.a)({},i[o].data),{},{actions:((null===(n=i[o].data)||void 0===n?void 0:n.actions)||[]).filter((function(t){return t.id!==e}))})}),F(Object(a.a)(Object(a.a)({},U.current),{},Object(c.a)({},z.current,(U.current[z.current]||[]).filter((function(t){return t!==e}))))),M(i)};return Object(p.jsxs)(u.a,{fullHeight:!0,color:"PreviewPage grey100",children:[n&&Object(p.jsxs)("div",{className:"drawer",children:["events"===n&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.a,{children:Object(p.jsx)(l.a,{variant:"h3",children:"Events"})}),Object(p.jsx)(O.a,{type:"events",nodeId:x,listItems:h.c,selectedId:A,handleSelect:function(t){C([t]);var e=Object.assign([],K);e[0]={id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",event:h.c.find((function(e){return e.id===t})),focusNodeAction:function(){f("events"),y("1")},btnAction:function(){f("events"),y("1")}},position:{x:250,y:25}},1===e.length&&e.push({id:"2",type:"btnSelectorNode",data:V("2",{x:250,y:200}),position:{x:250,y:200}},{id:"edges-1-2",source:"1",target:"2",type:"smoothstep"}),f(null),M(e)}})]}),"conditions"===n&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.a,{children:Object(p.jsx)(l.a,{variant:"h3",children:"Conditions"})}),Object(p.jsx)(O.a,{type:"conditions",nodeId:x,listItems:h.b,selectedId:k,handleSelect:function(t){var e;L((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(c.a)({},x,[].concat(Object(i.a)(k[x]||[]),[t])))}));var n=Object.assign([],K),o=n.findIndex((function(t){return t.id===x}));n[o]=Object(a.a)(Object(a.a)({},n[o]),{},{data:Object(a.a)(Object(a.a)({},n[o].data),{},{conditions:[].concat(Object(i.a)((null===(e=n[o].data)||void 0===e?void 0:e.conditions)||[]),[h.b.find((function(e){return e.id===t}))])})}),M(n)}})]}),"actions"===n&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.a,{children:Object(p.jsx)(l.a,{variant:"h3",children:"Actions"})}),Object(p.jsx)(O.a,{type:"actions",nodeId:x,listItems:h.a,selectedId:P,onFocusId:null===B||void 0===B?void 0:B.id,handleSelect:function(t){W(h.a.find((function(e){return e.id===t})))}}),B&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.a,{children:Object(p.jsx)(l.a,{variant:"h3",children:"Action Details"})}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)(b.a,{fullWidth:!0,margin:"dense",onChange:function(t){return W((function(e){return Object(a.a)(Object(a.a)({},e),{},{value:t.target.value})}))},type:B.type,value:B.value||"",label:B.label}),Object(p.jsx)(s.a,{variatn:"text",disableRipple:!0,onClick:function(){var t;F((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(c.a)({},x,[].concat(Object(i.a)(P[x]||[]),[B.id])))}));var e=Object.assign([],K),n=e.findIndex((function(t){return t.id===x}));e[n]=Object(a.a)(Object(a.a)({},e[n]),{},{data:Object(a.a)(Object(a.a)({},e[n].data),{},{actions:[].concat(Object(i.a)((null===(t=e[n].data)||void 0===t?void 0:t.actions)||[]),[B])})}),M(e)},children:"Add"})]})]})]})]}),Object(p.jsxs)("div",{className:"home-section",children:[Object(p.jsx)(j.a,{handleSave:function(){var t=K.filter((function(t){return"btnSelectorNode"===t.type})),e=[];t.forEach((function(t){switch(t.data.type){case"event":e.push({event:t.data.event});break;case"condition":e.push({condition:t.data.conditions});break;case"action-yes":case"action":e.push(Object(c.a)({},t.data.type,Object(i.a)(t.data.actions||[])))}})),console.log("elementes",K),console.log("output",e)},children:Object(p.jsx)(l.a,{variant:"h3",children:"Map your automation"})}),Object(p.jsx)("div",{className:"flow-body",children:Object(p.jsx)(d.c,{elementsSelectable:!0,elements:K,onElementsRemove:function(t){return M((function(e){return Object(d.d)(t,e)}))},onConnect:function(t){return M((function(e){return Object(d.b)(t,e)}))},nodeTypes:v,deleteKeyCode:46,onSelectionChange:function(t){t||f(null)}})})]})]})}}}]);
//# sourceMappingURL=5.ceb3e8eb.chunk.js.map