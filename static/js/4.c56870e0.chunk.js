(this["webpackJsonpflow-frontend"]=this["webpackJsonpflow-frontend"]||[]).push([[4],{136:function(e,t,n){},139:function(e,t,n){},143:function(e,t,n){},145:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var c=n(40),a=n(18),i=n(147),o=n(126),d=n(1),s=n.n(d),l=n(127),r=n(169),b=n(170),j=n(171),u=n(41),O=n(42),h=n(137),f=n.n(h),v=n(168),m=(n(136),n(8)),p=function(e){var t=e.handleSave,n=e.children,c=Object(O.a)(e,["handleSave","children"]);return Object(m.jsxs)("div",Object(a.a)(Object(a.a)({className:"CardHeader"},c),{},{children:[Object(m.jsxs)("div",{className:"left-section",children:[n,Object(m.jsx)(v.a,{disableRipple:!0,children:Object(m.jsx)(f.a,{})})]}),t&&Object(m.jsx)(r.a,{variant:"contained",onClick:t,children:"Save"})]}))},x=n(140),y=n.n(x),g=n(141),N=n.n(g),S=n(142),A=n.n(S),C=(n(139),function(e){var t=Object(d.useState)(!1),n=Object(o.a)(t,2),c=n[0],i=n[1],s=e.listItems,l=e.selectedId,b=e.onFocusId,j=e.handleSelect,u=Object(O.a)(e,["listItems","selectedId","onFocusId","handleSelect"]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",Object(a.a)(Object(a.a)({className:"CardBody ".concat(s.length>3?"has-show-more":""," ").concat(c?"show-all":"")},u),{},{children:s.filter((function(e){return!l.includes(e.id)})).map((function(e){return Object(m.jsx)(r.a,{onClick:function(){return j(e.id)},disableRipple:!0,variant:"text",className:"btn-card-item ".concat(b===e.id?"on-focus":""),startIcon:Object(m.jsx)(y.a,{}),children:e.name},e.id)}))})),s.length>3&&Object(m.jsx)("div",{className:"btn-show-more",children:Object(m.jsxs)(r.a,{onClick:function(){return i(!c)},variant:"text",disableRipple:!0,endIcon:c?Object(m.jsx)(N.a,{}):Object(m.jsx)(A.a,{}),children:["Show ",c?"less":"more"]})})]})}),I=n(144),w=n.n(I),k=(n(143),Object(d.memo)((function(e){var t,n,c=e.id,a=e.data,i=e.isConnectable,o=Object(l.e)((function(e){return e.selectedElements}));return Object(m.jsxs)("div",{className:"ButtonSelectorNode ".concat(o&&o[0].id===c?"is-selected":""),onClick:function(){return a.btnAction()},children:[Object(m.jsx)("div",{children:Object(m.jsx)(b.a,{variant:"body1",children:a.label})}),a.event&&Object(m.jsx)(r.a,{variant:"contained",disabled:!0,className:"lbl-event",children:a.event.name}),(null===(t=a.conditions)||void 0===t?void 0:t.length)>0&&a.conditions.map((function(e,t){return Object(m.jsx)(s.a.Fragment,{children:Object(m.jsxs)("div",{className:"label-div",children:[Object(m.jsx)(r.a,{variant:"contained",disabled:!0,className:"lbl-condition",children:e.name}),Object(m.jsx)(v.a,{disableRipple:!0,onClick:function(){return a.handleDeleteCondition(e.id)},children:Object(m.jsx)(w.a,{})}),t!==a.conditions.length-1&&Object(m.jsx)(b.a,{variant:"h6",children:"AND"})]})},e.id)})),(null===(n=a.actions)||void 0===n?void 0:n.length)>0&&a.actions.map((function(e,t){return Object(m.jsx)(s.a.Fragment,{children:Object(m.jsxs)("div",{className:"label-div",children:[Object(m.jsxs)(r.a,{variant:"contained",disabled:!0,className:"lbl-action",children:[e.name," - ",e.value]}),Object(m.jsx)(v.a,{disableRipple:!0,onClick:function(){return a.handleDeleteAction(e.id)},children:Object(m.jsx)(w.a,{})}),t!==a.actions.length-1&&Object(m.jsx)(b.a,{variant:"h6",children:"AND"})]})},e.id)})),a.btnLabel&&Object(m.jsx)(r.a,{onClick:function(e){a.btnAction(),e.stopPropagation()},variant:"contained",children:a.btnLabel}),a.btnLabel2&&Object(m.jsx)(r.a,{onClick:function(e){a.btnAction2(),e.stopPropagation()},variant:"contained",children:a.btnLabel2}),Object(m.jsx)(l.a,{type:"source",position:"bottom",style:{bottom:10,top:"auto",background:"#555"},isConnectable:i})]})}))),D=(n(145),[{id:1,name:"New order placed"},{id:2,name:"New signup"},{id:3,name:"New subscriber"},{id:4,name:"New cancellation"}]),L=[{id:1,name:"Amount > 100"},{id:2,name:"Amount < 100"},{id:3,name:"Product is Coffee"},{id:4,name:"Product is Tea"},{id:5,name:"Date > Today"},{id:6,name:"Date < Today"}],R=[{id:1,name:"Send email to Contact",type:"email",label:"Email address"},{id:2,name:"Call Contact",type:"tel",label:"Contact Number"},{id:3,name:"Add Tag to Contact",type:"tel",label:"Contact Number"},{id:4,name:"Remove Contact",type:"tel",label:"Contact Number"}],F={btnSelectorNode:k};t.default=function(){var e=Object(d.useState)("events"),t=Object(o.a)(e,2),n=t[0],s=t[1],O=Object(d.useState)("1"),h=Object(o.a)(O,2),f=h[0],v=h[1],x=Object(d.useState)([]),y=Object(o.a)(x,2),g=y[0],N=y[1],S=Object(d.useState)([]),A=Object(o.a)(S,2),I=A[0],w=A[1],k=Object(d.useState)([]),T=Object(o.a)(k,2),E=T[0],P=T[1],H=Object(d.useState)(null),W=Object(o.a)(H,2),B=W[0],J=W[1],K=[{id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",btnLabel:"Select event trigger",btnAction:function(){s("events"),v("1")}},position:{x:250,y:25}}],M=Object(d.useState)(K),q=Object(o.a)(M,2),z=q[0],G=q[1],Q=Object(d.useRef)();Q.current=z;var U=Object(d.useRef)();U.current=I;var V=Object(d.useRef)();V.current=I;var X=function(e,t){var n,c=Object.assign([],Q.current),i=c.findIndex((function(t){return t.id===e}));c[i]=Object(a.a)(Object(a.a)({},c[i]),{},{data:Object(a.a)(Object(a.a)({},c[i].data),{},{conditions:((null===(n=c[i].data)||void 0===n?void 0:n.conditions)||[]).filter((function(e){return e.id!==t}))})}),w(U.current.filter((function(e){return e!==t}))),G(c)},Y=function(e,t){var n,c=Object.assign([],Q.current),i=c.findIndex((function(t){return t.id===e}));c[i]=Object(a.a)(Object(a.a)({},c[i]),{},{data:Object(a.a)(Object(a.a)({},c[i].data),{},{actions:((null===(n=c[i].data)||void 0===n?void 0:n.actions)||[]).filter((function(e){return e.id!==t}))})}),P(V.current.filter((function(e){return e!==t}))),G(c)};return Object(m.jsxs)(u.a,{fullHeight:!0,color:"HomePage grey100",children:[n&&Object(m.jsxs)("div",{className:"drawer",children:["events"===n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{children:Object(m.jsx)(b.a,{variant:"h3",children:"Events"})}),Object(m.jsx)(C,{listItems:D,selectedId:g,handleSelect:function(e){N([e]);var t=Object.assign([],z);t[0]={id:"1",type:"btnSelectorNode",data:{label:"When",type:"event",event:D.find((function(t){return t.id===e})),btnAction:function(){s("events"),v("1")}},position:{x:250,y:25}},1===t.length&&t.push({id:"2",type:"btnSelectorNode",data:{label:"Next Step",type:"condition",btnLabel:"Add condition",btnAction:function(){s("conditions"),v("2");var e=Object.assign([],Q.current);(e=e.filter((function(e){return"2"!==e.id&&"edges-1-2"!==e.id}))).push({id:"2",type:"btnSelectorNode",data:{label:"If...",type:"condition",btnLabel:"Add condition",btnAction:function(){s("conditions"),v("2")},handleDeleteCondition:function(e){return X("2",e)}},position:{x:250,y:200}},{id:"3",type:"btnSelectorNode",data:{label:"Then...",type:"action-yes",btnLabel:"Add action",btnAction:function(){s("actions"),v("3")},handleDeleteAction:function(e){return Y("3",e)}},position:{x:250,y:600}},{id:"4",type:"btnSelectorNode",data:{label:"Then...",type:"action-no",btnLabel:"Add action",btnAction:function(){s("actions"),v("4")},handleDeleteAction:function(e){return Y("4",e)}},position:{x:500,y:350}},{id:"edges-1-2",source:"1",target:"2",type:"smoothstep"},{id:"edges-2-3",source:"2",target:"3",type:"smoothstep",label:"yes"},{id:"edges-2-4",source:"2",target:"4",type:"smoothstep",label:"no"}),G(e)},btnLabel2:"Add Action",btnAction2:function(){s("actions"),v("2");var e=Object.assign([],Q.current);(e=e.filter((function(e){return"2"!==e.id&&"edges-1-2"!==e.id}))).push({id:"2",type:"btnSelectorNode",data:{label:"Then...",type:"action",btnLabel:"Add action",btnAction:function(){s("actions"),v("2")},handleDeleteAction:function(e){return Y("2",e)}},position:{x:250,y:200}},{id:"edges-1-2",source:"1",target:"2",type:"smoothstep"}),G(e)},handleDeleteCondition:function(e){return X("2",e)}},position:{x:250,y:200}},{id:"edges-1-2",source:"1",target:"2",type:"smoothstep"}),s(null),G(t)}})]}),"conditions"===n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{children:Object(m.jsx)(b.a,{variant:"h3",children:"Conditions"})}),Object(m.jsx)(C,{listItems:L,selectedId:I,handleSelect:function(e){var t;w([].concat(Object(i.a)(I),[e]));var n=Object.assign([],z),c=n.findIndex((function(e){return e.id===f}));n[c]=Object(a.a)(Object(a.a)({},n[c]),{},{data:Object(a.a)(Object(a.a)({},n[c].data),{},{conditions:[].concat(Object(i.a)((null===(t=n[c].data)||void 0===t?void 0:t.conditions)||[]),[L.find((function(t){return t.id===e}))])})}),G(n)}})]}),"actions"===n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{children:Object(m.jsx)(b.a,{variant:"h3",children:"Actions"})}),Object(m.jsx)(C,{listItems:R,selectedId:E,onFocusId:null===B||void 0===B?void 0:B.id,handleSelect:function(e){J(R.find((function(t){return t.id===e})))}}),B&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{children:Object(m.jsx)(b.a,{variant:"h3",children:"Action Details"})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(j.a,{fullWidth:!0,margin:"dense",onChange:function(e){return J((function(t){return Object(a.a)(Object(a.a)({},t),{},{value:e.target.value})}))},type:B.type,value:B.value||"",label:B.label}),Object(m.jsx)(r.a,{variatn:"text",disableRipple:!0,onClick:function(){var e;P([].concat(Object(i.a)(E),[B.id]));var t=Object.assign([],z),n=t.findIndex((function(e){return e.id===f}));t[n]=Object(a.a)(Object(a.a)({},t[n]),{},{data:Object(a.a)(Object(a.a)({},t[n].data),{},{actions:[].concat(Object(i.a)((null===(e=t[n].data)||void 0===e?void 0:e.actions)||[]),[B])})}),G(t)},children:"Add"})]})]})]})]}),Object(m.jsxs)("div",{className:"home-section",children:[Object(m.jsx)(p,{handleSave:function(){var e=z.filter((function(e){return"btnSelectorNode"===e.type})),t=[];e.forEach((function(e){switch(e.data.type){case"event":t.push({event:e.data.event});break;case"condition":t.push({condition:e.data.conditions});break;case"action-yes":case"action-no":case"action":t.push(Object(c.a)({},e.data.type,Object(i.a)(e.data.actions)))}})),console.log("output",t)},children:Object(m.jsx)(b.a,{variant:"h3",children:"Map your automation"})}),Object(m.jsx)("div",{className:"flow-body",children:Object(m.jsx)(l.c,{elementsSelectable:!0,elements:z,onElementsRemove:function(e){return G((function(t){return Object(l.d)(e,t)}))},onConnect:function(e){return G((function(t){return Object(l.b)(e,t)}))},nodeTypes:F,deleteKeyCode:46})})]})]})}}}]);
//# sourceMappingURL=4.c56870e0.chunk.js.map